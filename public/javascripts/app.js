!function(){"use strict";var t="undefined"!=typeof window?window:global;if("function"!=typeof t.require){var e={},n={},r=function(t,e){return{}.hasOwnProperty.call(t,e)},i=function(t,e){var n,r,i=[];n=/^\.\.?(\/|$)/.test(e)?[t,e].join("/").split("/"):e.split("/");for(var o=0,a=n.length;a>o;o++)r=n[o],".."===r?i.pop():"."!==r&&""!==r&&i.push(r);return i.join("/")},o=function(t){return t.split("/").slice(0,-1).join("/")},a=function(e){return function(n){var r=o(e),a=i(r,n);return t.require(a,e)}},s=function(t,e){var r={id:t,exports:{}};return n[t]=r,e(r.exports,a(t),r),r.exports},l=function(t,o){var a=i(t,".");if(null==o&&(o="/"),r(n,a))return n[a].exports;if(r(e,a))return s(a,e[a]);var l=i(a,"./index");if(r(n,l))return n[l].exports;if(r(e,l))return s(l,e[l]);throw new Error('Cannot find module "'+t+'" from "'+o+'"')},c=function(t,n){if("object"==typeof t)for(var i in t)r(t,i)&&(e[i]=t[i]);else e[t]=n},u=function(){var t=[];for(var n in e)r(e,n)&&t.push(n);return t};t.require=l,t.require.define=c,t.require.register=c,t.require.list=u,t.require.brunch=!0}}(),require.register("application",function(t,e,n){var r,i,o,a=function(t,e){return function(){return t.apply(e,arguments)}},s={}.hasOwnProperty,l=function(t,e){function n(){this.constructor=t}for(var r in e)s.call(e,r)&&(t[r]=e[r]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t};e("lib/view_helper"),i=function(t){function e(){return this.initialize=a(this.initialize,this),o=e.__super__.constructor.apply(this,arguments)}return l(e,t),e.prototype.initialize=function(){var t=this;return this.rootRoute="home",this.on("initialize:after",function(){return this.startHistory(),this.getCurrentRoute()||this.navigate(this.rootRoute,{trigger:!0,init:!0}),"function"==typeof Object.freeze?Object.freeze(this):void 0}),this.addRegions({headerRegion:"#header-region",mainRegion:"#main-region",footerRegion:"#footer-region"}),this.mainRegion.open=function(t){return this.$el.hide(),"loadingView"!==t.el.id?(this.$el.fadeOut("slow"),this.$el.html(t.el).css({opacity:0}),this.$el.show(),this.$el.fadeTo("slow",1)):this.$el.show()},this.reqres.setHandler("default:region",function(){return t.mainRegion}),this.addInitializer(function(){return t.module("HeaderApp").start(),t.module("FooterApp").start()}),this.start()},e}(Backbone.Marionette.Application),r=new i,r.commands.setHandler("register:instance",function(t,e){return r.register(t,e)}),r.commands.setHandler("unregister:instance",function(t,e){return r.unregister(t,e)}),r.rootRoute="",n.exports=r,Date.prototype.yyyymmdd=function(){var t,e,n;return n=this.getFullYear().toString(),e=(this.getMonth()+1).toString(),t=this.getDate().toString(),n+"-"+(e[1]?e:"0"+e[0])+"-"+(t[1]?t:"0"+t[0])},e("controllers/baseController"),e("entities/entities"),e("components/loading/loading"),e("modules/header/header_app"),e("modules/footer/footer_app"),e("modules/about/about_app"),e("modules/artists/artists_app"),e("modules/station/station_app"),e("modules/landing/landing_app")}),require.register("colorList",function(t,e,n){var r,i,o,a,s,l,c,u,p,d,h,f;f=e("lib/stationList"),a=d3.scale.category20c(),s=d3.scale.category20b(),l=d3.scale.category20(),d=a.range(),i=s.range(),i.forEach(function(t){return d.push(t)}),r=l.range(),r.forEach(function(t){return d.push(t)}),a.range(d),u={},_.each(f,function(t){return u[t.toLowerCase()]=a(t)}),p=function(t){return"string"==typeof t&&h[t.toUpperCase()]?h[t.toUpperCase()]:o[t]?o[t]:(a.range(d.sort()),a(t))},n.exports=p,c={BC:["#8ad08c","#80c47e","#77b972","#6fad66","#67a25b","#609651","#598b48","#52803e","#4c7436","#45692e"],AB:["#d5d075","#c1bb73","#aea770","#9b946b","#878164"],SK:["#e3a667"],MB:["#cc9f61","#b5945a","#9e8752","#877949"],ON:["#e9817d","#e37b74","#dd776b","#d67263","#d06e5b","#c96b53","#c3684c","#bd6545","#b6623e","#b06037","#aa5d31","#a35b2b","#9d5926","#965821","#90561c","#8a5417","#835313","#7d510f","#774f0b","#704d08"],QC:["#d768db","#c566d1","#b564c6","#a562bc","#975fb1","#8a5ca7","#7d589c","#725592","#675187","#5c4c7d"],NB:["#20a3fe","#40c8fe","#60e4fd","#7ff8fd","#9ffcf5"],NS:["#0165e4","#025bc9","#0351ae","#044593","#043a78"],NL:["#22fc32","#4efa44","#7ff765","#a7f585","#c6f2a5"]},h={CHLY:"#45692e",CFUV:"#4c7436",CITR:"#52803e",CFRO:"#598b48",CJSF:"#609651",CIVL:"#67a25b",CFUR:"#6fad66",CFBX:"#77b972",CJLY:"#80c47e",CICK:"#8ad08c",CJSR:"#ebe06e",CKUA:"#e4da74",CJSW:"#ddd479",CKXU:"#d7ce7d",undefined:"#c6f2a5",CFCR:"#e7DEB2",CJUM:"#cc9f61",CKUW:"#ca6400",CILU:"#c64544",CKLU:"#c84a48",CJAM:"#ca4f4c",CHRW:"#cc5450",RADL:"#ce5853",CKMS:"#d05d57",CFRU:"#d2625b",CIUT:"#d4675f",SCOP:"#d66c63",CHRY:"#d77167",CSCR:"#d9766c",CFMU:"#db7b70",CIOI:"#dd8074",CFRE:"#df8478",CFBU:"#e1897d",CFRC:"#e38e81",CKCU:"#e59386",CHUO:"#e7988a",CJMQ:"#d768db",CJLO:"#c566d1",CHOQ:"#b564c6",CISM:"#a562bc",CKUT:"#975fb1",CFOU:"#8a5ca7",CHYZ:"#7d589c",CHMA:"#0165e4",CHSR:"#025bc9",CFMH:"#0351ae",CKDU:"#20a3fe",CFXU:"#40c8fe",CAPR:"#60e4fd",CHMR:"#00FFFF"},o={Nanaimo:"#45692e",Victoria:"#4c7436",Vancouver:"#52803e",Burnaby:"#609651",Abbotsford:"#67a25b","Prince George":"#6fad66",Kamloops:"#77b972",Nelson:"#80c47e",Smithers:"#8ad08c",Edmonton:"#ebe06e",Calgary:"#ddd479",Lethbridge:"#d7ce7d",Saskatoon:"#e7DEB2",Winnipeg:"#cc9f61","Thunder Bay":"#c64544",Sudbury:"#c84a48",Windsor:"#ca4f4c",London:"#cc5450",Waterloo:"#ce5853",Guelph:"#d2625b",Toronto:"#d4675f","North York":"#d77167",Hamilton:"#db7b70",Mississauga:"#df8478","St. Catharines":"#e1897d",Kingston:"#e38e81",Ottawa:"#e59386",Sherbrooke:"#d768db",Montreal:"#c566d1","Trois-Rivieres":"#8a5ca7","QuÃ©bec":"#7d589c",Sackville:"#0165e4",Fredericton:"#025bc9","Saint John":"#0351ae",Halifax:"#20a3fe",Antigonish:"#40c8fe",Sydney:"#60e4fd","St. John's":"#00FFFF"}}),require.register("components/loading/loading",function(t,e,n){var r,i,o={}.hasOwnProperty,a=function(t,e){function n(){this.constructor=t}for(var r in e)o.call(e,r)&&(t[r]=e[r]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t};r=e("application"),i=e("controllers/baseController"),n.exports=r.module("Components.Loading",function(t,e,n,r,i,o){var s,l;return t.LoadingController=function(n){function r(){return s=r.__super__.constructor.apply(this,arguments)}return a(r,n),r.prototype.initialize=function(t){var e,n,r;switch(r=t.view,e=t.config,e=o.isBoolean(e)?{}:e,o.defaults(e,{loadingType:"spinner",entities:this.getEntities(r),debug:!1}),e.loadingType){case"opacity":this.region.currentView&&this.region.currentView.$el.css("opacity",.2);break;case"spinner":n=this.getLoadingView(),this.show(n);break;default:throw new Error("Invalid loadingType")}return this.showRealView(r,n,e)},r.prototype.showRealView=function(t,n,r){var i=this;return e.execute("when:fetched",r.entities,function(){switch(r.loadingType){case"opacity":i.region.currentView&&i.region.currentView.$el.removeAttr("style");break;case"spinner":if(i.region.currentView!==n)return t.close()}return r.debug?void 0:i.show(t)})},r.prototype.getEntities=function(t){return o.chain(t).pick("model","collection").toArray().compact().value()},r.prototype.getLoadingView=function(){return new t.LoadingView},r}(e.Controllers.Base),e.commands.setHandler("show:loading",function(e,n){return new t.LoadingController({view:e,region:n.region,config:n.loading})}),t.LoadingView=function(t){function e(){return l=e.__super__.constructor.apply(this,arguments)}return a(e,t),e.prototype.template=!1,e.prototype.className="loading-container small-1 small-centered columns",e.prototype.id="loadingView",e.prototype.onShow=function(){var t;return t=this._getOptions(),this.spinner=new Spinner(t),this.spinner.spin(),this.$el.append(this.spinner.el)},e.prototype.onClose=function(){return i(document).foundation(),this.spinner.stop()},e.prototype._getOptions=function(){return{lines:10,length:20,width:1,radius:7,corners:1,rotate:9,direction:1,color:"#000",speed:1,trail:60,shadow:!1,hwaccel:!1,className:"spinner",zIndex:2e9}},e}(r.ItemView)})}),require.register("controllers/baseController",function(t,e,n){var r,i={}.hasOwnProperty,o=function(t,e){function n(){this.constructor=t}for(var r in e)i.call(e,r)&&(t[r]=e[r]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t};r=e("application"),n.exports=r.module("Controllers",function(t,e,n,r,i,a){return t.Base=function(t){function n(t){null==t&&(t={}),this.region=t.region||e.request("default:region"),this._instance_id=a.uniqueId("controller"),e.execute("register:instance",this,this._instance_id),n.__super__.constructor.apply(this,arguments)}return o(n,t),n.prototype.close=function(){return e.execute("unregister:instance",this,this._instance_id),n.__super__.close.apply(this,arguments)},n.prototype.show=function(t,e){return null==e&&(e={}),a.defaults(e,{loading:!1,region:this.region}),this._setMainView(t),this._manageView(t,e)},n.prototype._setMainView=function(t){return this._mainView?void 0:(this._mainView=t,this.listenTo(t,"close",this.close))},n.prototype._manageView=function(t,n){return n.loading?e.execute("show:loading",t,n):n.region.show(t)},n}(r.Controller)})}),require.register("entities/entities",function(t,e,n){var r,i,o,a,s,l={}.hasOwnProperty,c=function(t,e){function n(){this.constructor=t}for(var r in e)l.call(e,r)&&(t[r]=e[r]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t};r=e("application"),s=function(t){var e,n,r;return r=function(){switch(!1){case!t:return moment(t);default:return moment()}}(),e=r.get("day"),n=function(){switch(!1){case 0!==e:return r.day(-5);case 1!==e:return r.day(-5);case 2!==e:return r;case!(e>2):return r.day(2)}}(),n=moment(n),n.format("YYYY-MM-DD")},a=function(t,e){var n;if(t=moment(t),e=moment(e),_.isEqual(t,e))return 1;for(n=0;e>=t;)n++,t=moment(t.day(9));return n},o=function(t,e){var n,r;if(t=moment(t),e=moment(e),_.isEqual(t,e))return[t.format("YYYY-MM-DD")];for(n=0,r=[];e>=t;)r.push(t.format("YYYY-MM-DD")),t=moment(t.day(9));return r},i=function(t){var e,n,r,i,o;if(0===t.length)return null;for(i={},r=1,o=[t[0]],n=0;n<t.length;)e=t[n],null==i[e]?i[e]=1:i[e]++,i[e]>r?(o=[e],r=i[e]):i[e]===r&&(o.push(e),r=i[e]),n++;return o},n.exports=r.module("Entities",function(t,e,n,r,l,u){var p,d,h,f,m,g,y,v,b,w,_,x,C,k,S,A,I,R,D;return e.commands.setHandler("when:fetched",function(t,e){var n;return n=u.chain([t]).flatten().pluck("_fetch").value(),l.when.apply(l,n).done(function(){return l(".accordion").on("click","dd:not(.active)",function(){return l(this).addClass("active").find(".content").slideToggle("slow")}),e()})}),t.Header=function(t){function e(){return d=e.__super__.constructor.apply(this,arguments)}return c(e,t),e}(n.Model),t.HeaderCollection=function(e){function n(){return h=n.__super__.constructor.apply(this,arguments)}return c(n,e),n.prototype.model=t.Header,n}(n.Collection),t.ChartItem=function(t){function e(){return x=e.__super__.constructor.apply(this,arguments)}return c(e,t),e.prototype.initialize=function(){var t,e,n,r,i,o;for(e=0,this.set("rank",this.get("currentPos")),o=this.get("appearances"),n=function(t){var n;return n=0,n=31-parseInt(t.position),e+=n},r=0,i=o.length;i>r;r++)t=o[r],n(t);return this.set("frontPoints",e)},e}(n.Model),t.ChartCollection=function(e){function n(){return C=n.__super__.constructor.apply(this,arguments)}return c(n,e),n.prototype.model=t.ChartItem,n.prototype.sortAttr="points",n.prototype.sortDir=-1,n.prototype.sortCharts=function(t){return this.sortAttr=t,this.sort(),this.trigger("reset")},n.prototype.comparator=function(t,e){return t=t.get(this.sortAttr),e=e.get(this.sortAttr),t===e?0:1===this.sortDir?t>e?1:-1:t>e?-1:1},n}(n.Collection),t.Album=function(e){function n(){return k=n.__super__.constructor.apply(this,arguments)}return c(n,e),n.prototype.initialize=function(){return this.getAppearances()},n.prototype.getAppearances=function(){var e;return e=this.get("appearances"),this.set("appearancesCollection",new t.Appearances(e))},n}(n.Model),t.ArtistCollection=function(e){function n(){return S=n.__super__.constructor.apply(this,arguments)}return c(n,e),n.prototype.model=t.Album,n.prototype.filterFacets=["album","label","slug"],n.prototype.countPoints=function(){var t,e,n,r,o,a,s,l,c,u,p,d,h,f,m=this;for(this.popAlbum="",this.popAlbumNumber=0,this.totalChartScore=0,this.totalAppearances=0,this.stations=[],this.popStation="",p=this.models,n=function(){},o=0,l=p.length;l>o;o++){for(e=p[o],n(e),this.totalChartScore+=e.get("totalPoints"),this.totalAppearances+=e.attributes.appearances.length,e.attributes.appearances.length>this.popAlbumNumber&&(this.popAlbum=e.get("album"),this.popAlbumNumber=e.attributes.appearances.length),d=e.attributes.appearances,r=function(t){return m.stations.push(t.station.toUpperCase())},a=0,c=d.length;c>a;a++)t=d[a],r(t);this.popStation=i(this.stations)}for(h=this.models,f=[],s=0,u=h.length;u>s;s++)e=h[s],f.push(function(t){return t.set("totalChartScore",m.totalChartScore),t.set("totalAppearances",m.totalAppearances),t.set("popAlbum",m.popAlbum),t.set("popStation",m.popStation)}(e));return f},n}(n.FacetedSearchCollection),t.Appearance=function(t){function e(){return A=e.__super__.constructor.apply(this,arguments)}return c(e,t),e}(n.Model),t.Appearances=function(e){function n(){return I=n.__super__.constructor.apply(this,arguments)}return c(n,e),n.prototype.model=t.Appearance,n.prototype.filterFacets=["station","position","week"],n.prototype.sortAttr="week",n.prototype.sortDir=-1,n.prototype.sortCharts=function(t){return this.sortAttr=t,this.sort(),this.trigger("reset")},n.prototype.comparator=function(t,e){return"position"===this.sortAttr?(t=+t.get(this.sortAttr),e=+e.get(this.sortAttr)):(t=t.get(this.sortAttr),e=e.get(this.sortAttr)),t===e?0:1===this.sortDir?t>e?1:-1:t>e?-1:1},n}(n.FacetedSearchCollection),t.StationItem=function(t){function e(){return R=e.__super__.constructor.apply(this,arguments)}return c(e,t),e}(n.Model),t.SingleStation=function(e){function n(){return D=n.__super__.constructor.apply(this,arguments)}return c(n,e),n.prototype.model=t.StationItem,n}(n.Collection),t.DateItem=function(t){function e(){return f=e.__super__.constructor.apply(this,arguments)}return c(e,t),e}(n.Model),t.SingleDate=function(e){function n(){return m=n.__super__.constructor.apply(this,arguments)}return c(n,e),n.prototype.model=t.DateItem,n}(n.Collection),t.Station=function(t){function e(){return g=e.__super__.constructor.apply(this,arguments)}return c(e,t),e}(n.Model),t.Stations=function(e){function n(){return y=n.__super__.constructor.apply(this,arguments)}return c(n,e),n.prototype.model=t.Station,n.prototype.filterFacets=["name","province","city"],n.prototype.sortAttr="postalCode",n.prototype.sortDir=-1,n.prototype.sortCharts=function(t){return this.sortAttr=t,this.sort(),this.trigger("reset")},n.prototype.comparator=function(t,e){return"position"===this.sortAttr?(t=+t.get(this.sortAttr),e=+e.get(this.sortAttr)):(t=t.get(this.sortAttr),e=e.get(this.sortAttr)),t===e?0:1===this.sortDir?t>e?1:-1:t>e?-1:1},n}(n.FacetedSearchCollection),t.Label=function(t){function e(){return v=e.__super__.constructor.apply(this,arguments)}return c(e,t),e}(n.Model),t.LabelCollection=function(e){function n(){return b=n.__super__.constructor.apply(this,arguments)}return c(n,e),n.prototype.model=t.Label,n.prototype.filterFacets=["album","artist","appearances"],n}(n.FacetedSearchCollection),t.Topx=function(t){function e(){return w=e.__super__.constructor.apply(this,arguments)}return c(e,t),e.prototype.initialize=function(){return this.set({info:this.collection.info,startDate:this.collection.startDate,endDate:this.collection.endDate,potential:this.collection.potential,percentage:parseInt(this.collection.weeks.length/this.collection.potential*1e3)})},e}(n.Model),t.TopxCollection=function(e){function n(){return _=n.__super__.constructor.apply(this,arguments)}return c(n,e),n.prototype.model=t.Topx,n.prototype.filterFacets=["album","artist","firstWeek"],n.prototype.parse=function(t){var e,n,r,i,o,a,s,l,c,p,d,h,f,m=this;for(i=[],n=[],t=t.filter(function(t){return t._id.isNull===!1&&""!==t._id.artist?t:void 0}),r=t.length,o=function(t){var e,o,a,s,l,c;for(t.artist=t._id.artist,t.album=t._id.album,t.label=t._id.label,t.slug=t._id.slug,t.isNull=t._id.isNull,t.firstWeek=t._id.firstWeek,o=0,t.stations=[],c=t.appearances,a=function(e){var r;return r=0,r=31-parseInt(e.position),o+=r,i.push(e.week),n.push(e.station),t.stations.push(e.station)},s=0,l=c.length;l>s;s++)e=c[s],a(e);return t.stations=u.uniq(t.stations),t.frontPoints=o,t.totalAlbums=r},l=0,d=t.length;d>l;l++)e=t[l],o(e);for(i.sort(),this.weeks=u.uniq(i,!0),this.stations=u.uniq(n),a=function(t){return t.totalWeeks=m.weeks,t.totalStations=m.stations.length},c=0,h=t.length;h>c;c++)e=t[c],a(e);for(t=t.sort(function(t,e){return t=+t.frontPoints,e=+e.frontPoints,t===e?0:t>e?-1:1}),s=function(e){return e.rank=t.indexOf(e)+1},p=0,f=t.length;f>p;p++)e=t[p],s(e);return t},n.prototype.sortAttr="rank",n.prototype.sortDir=1,n.prototype.sortCharts=function(t){return this.sortAttr=t,this.sort(),this.trigger("reset")},n.prototype.comparator=function(t,e){return t=t.get(this.sortAttr),e=e.get(this.sortAttr),t===e?0:1===this.sortDir?t>e?1:-1:t>e?-1:1},n}(n.FacetedSearchCollection),p={getTopx:function(n){var r,i,l,c,u,p,d,h,f,m;return r=moment(),c=30,n.number&&(c=n.number),f=new t.TopxCollection,f.number=c,n.station&&(d=n.station.toUpperCase()),d&&(f.info=e.request("stations:entities",d)),f.station=d,h=""+r.format("YYYY-MM-DD"),p=h,n.startDate&&(p=n.startDate),l=h,n.endDate&&(l=n.endDate),p=s(p),l=s(l),f.startDate=p,f.endDate=l,f.potentialA=o(p,l),f.potential=a(p,l),d&&p&&l?(u="/api/top/"+d+"/"+p+"/"+l,p===l?(i=""+d+" Top 30 for the week of "+p,m=p):i="Top Albums on "+d+" between "+p+" and "+l):(u="/api/topall/"+p+"/"+l,p===l?(i="For the week of "+p,m=p):i="For the "+f.potential+" weeks between "+p+" and "+l),f.desc=i,m&&(f.week=m),f.url=u,f.fetch({reset:!0}),f},getLabel:function(e){var n;return n=new t.LabelCollection,e=encodeURIComponent(e),n.url="/api/label/"+e,n.fetch({reset:!0}),n},getDate:function(e){var n;return n=new t.SingleDate,n.url="/api/date/"+e,n.fetch({reset:!0}),n},getStation:function(e){var n;return n=new t.SingleStation,n.url="/api/db/"+e,n.fetch({reset:!0}),n},getArtist:function(e){var n;return n=new t.ArtistCollection,e&&(n.artist=e),e&&(e=encodeURIComponent(e)),n.url="/api/artists/"+(e?e:""),n.fetch({reset:!0}),n},getHeaders:function(){return new t.HeaderCollection([{name:"Home",path:"home",icon:"fi-home"},{name:"Stations",path:"station",icon:"fi-results"},{name:"Artists",path:"artist",icon:"fi-results-demographics"},{name:"FAQ",path:"faq",icon:"fi-info"},{name:"Twitter",path:"http://twitter.com/chartzapp",icon:"fi-social-twitter"}])},getCharts:function(e,n){var r,i,o;return null==e&&(e=null),null==n&&(n=null),n&&(n=s(n)),null===e&&null===n?(i="/api/db/wholething",o="Full Database"):null===n&&null!==e?(i="/api/chart/"+e,o="Most recent "+e+" chart"):(i="/api/chart/"+e+"/"+n,o=""+e+" Top 30 for the week of "+n),r=new t.ChartCollection,r.desc=o,r.url=i,r.fetch({reset:!0}),r},getStations:function(e){var n;return n=new t.Stations,n.url=e?"api/stations/data/"+e:"api/stations/data/",n.fetch({reset:!0}),n}},e.reqres.setHandler("header:entities",function(){return p.getHeaders()}),e.reqres.setHandler("artist:entities",function(t){return p.getArtist(t)}),e.reqres.setHandler("chart:entities",function(t,e){return p.getCharts(t,e)}),e.reqres.setHandler("stations:entities",function(t){return p.getStations(t)}),e.reqres.setHandler("station:entities",function(t){return p.getStation(t)}),e.reqres.setHandler("date:entities",function(t){return p.getDate(t)}),e.reqres.setHandler("label:entities",function(t){return p.getLabel(t)}),e.reqres.setHandler("topx:entities",function(t){return p.getTopx(t)})})}),require.register("init",function(t,e){this.App=e("application"),$(function(){return App.initialize()})}),require.register("lib/stationList",function(t,e,n){n.exports=["CAPR","CFBU","CFBX","CFCR","CFMH","CFMU","CFOU","CFRC","CFRE","CFRO","CFRU","CFUR","CFUV","CFXU","CHLY","CHMA","CHMR","CHOQ","CHRW","CHRY","CHSR","CHUO","CHYZ","CICK","CILU","CIOI","CISM","CITR","CIUT","CIVL","CJAM","CJLO","CJLY","CJMQ","CJSF","CJSR","CJSW","CJUM","CKCU","CKDU","CKLU","CKMS","CKUA","CKUT","CKUW","CKXU","CSCR","RADL","SCOP"]}),require.register("lib/view_helper",function(){Handlebars.registerHelper("pick",function(t,e){return e.hash[t]}),Handlebars.registerHelper("toUpper",function(t){return t?t.toUpperCase():void 0}),Handlebars.registerHelper("json",function(t){return JSON.stringify(t)}),Handlebars.registerHelper("each_with_sort",function(t,e,n){var r,i,o,a;for(t=t.sort(function(t,n){return t=parseInt(t[e]),n=parseInt(n[e]),t>n?1:t===n?0:n>t?-1:void 0}),i="",o=0,a=t.length;a>o;o++)r=t[o],i+=n.fn(r);return i}),Handlebars.registerHelper("each_sort_date",function(t,e,n){var r,i,o,a;for(t=t.sort(function(t,n){return t=new Date(t[e]),n=new Date(n[e]),t>n?1:t===n?0:n>t?-1:void 0}),i="",o=0,a=t.length;a>o;o++)r=t[o],i+=n.fn(r);return i}),Handlebars.registerHelper("log",function(t){return console.log(t)}),Handlebars.registerHelper("countPoints",function(t){var e,n,r,i,o;for(n=0,r=function(t){var e;return e=0,e=31-parseInt(t.position),n+=e},i=0,o=t.length;o>i;i++)e=t[i],r(e);return n})}),require.register("modules/about/about_app",function(t,e,n){var r,i={}.hasOwnProperty,o=function(t,e){function n(){this.constructor=t}for(var r in e)i.call(e,r)&&(t[r]=e[r]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t};r=e("application"),n.exports=r.module("AboutApp",function(t,n,r,i,a){var s,l;return t.Router=function(t){function e(){return l=e.__super__.constructor.apply(this,arguments)}return o(e,t),e.prototype.appRoutes={faq:"about"},e}(i.AppRouter),t.startWithParent=!1,t.Show=e("modules/about/showAbout/showAbout_controller"),s={about:function(){return new t.Show.Controller({region:n.mainRegion}),a(document).foundation()}},n.addInitializer(function(){return new t.Router({controller:s})})})}),require.register("modules/about/showAbout/showAbout_controller",function(t,e,n){var r,i,o={}.hasOwnProperty,a=function(t,e){function n(){this.constructor=t}for(var r in e)o.call(e,r)&&(t[r]=e[r]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t};r=e("application"),i=e("controllers/baseController"),n.exports=r.module("AboutApp.Show",function(t,e,n,r,i){var o,s;return t.Controller=function(e){function n(){return o=n.__super__.constructor.apply(this,arguments)}return a(n,e),n.prototype.initialize=function(){return this.layout=this.getLayoutView(),this.show(this.layout,{loading:!0}),i(document).foundation()},n.prototype.getLayoutView=function(){return new t.Layout},n}(e.Controllers.Base),t.Layout=function(t){function e(){return s=e.__super__.constructor.apply(this,arguments)}return a(e,t),e.prototype.template="modules/about/showAbout/templates/show_layout",e.prototype.id="about-page",e}(r.Layout)})}),require.register("modules/about/showAbout/templates/show_layout",function(t,e,n){var r=Handlebars.template(function(t,e,n,r,i){return this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,t.helpers),i=i||{},'<div class=\'title-row\'>\n  <div class="row">\n  <div id="title_region" class="small-12 columns">\n      <h1 class="main-title">FAQ</h1>\n    </div>\n  </div>\n</div>\n<div class=\'panel-row\'>\n  <div class="row">\n    <div id="blurb_region" class="small-9 columns">\n      <h1>What?</h1>\n      <p class="lead">This is <strong>ChartZapp</strong>, a new way of analyzing Canadian Campus-Community Radio Charts.</p>\n      <p>It uses modern web technologies to explore and visualize the treasure-trove of data collected and compiled by the excellent folks at\n      <a href="http://www.earshot-online.com/" target="blank">!Earshot Online</a>, and published by the <a href="http://www.ncra.ca/" target="blank">the NCRA.</a></p>\n    </div>\n    <div class="small-3 columns text-right" id="faqicon">\n      <i class="fi-lightbulb"></i>\n    </div>\n  </div>\n</div>\n\n<div class=\'graph-row\'>\n  <div class="row">\n    <div class="small-3 columns " id="faqicon">\n      <i class="fi-torsos"></i>\n    </div>\n    <div id="blurb_region" class="small-9 columns text-right">\n      <h1>Who?</h1>\n      <p class="lead">Chartzapp was built for <strong>Stations, Artists, Labels, </strong>and <strong>Media.</strong></p>\n      <p>It makes information about Campus-Community Radio Charts more\n        accessible and visually stimulating, with the aim of providing some\n        newfangled, nerdy data analysis to the Canadian independent music community.\n      <p>It was developed independently by <a href="http://dorianlistens.com" target="blank">Dorian Scheidt,</a>\n         a Campus Community Radio Nerd (among other things) living in MontrÃ©al, QC, and now has the support of !earshot and the NCRA.</p>\n    </div>\n  </div>\n</div>\n\n\n<div class=\'panel-row\'>\n  <div class="row">\n    <div id="blurb_region" class="small-9 columns">\n      <h1>Why?</h1>\n      <p class="lead"><strong>Charts</strong> and <strong>Graphs</strong> were\n        simply made for each other, don\'t you agree?</p>\n      <p>More Reasons:</p>\n      <ul>\n        <li>Campus-Community Radio is Great!</li>\n        <li>Data Analysis and Visualization are Cool!</li>\n        <li>Learning new things is Fun!</li>\n      </ul>\n      </div>\n    <div class="small-3 columns text-right" id="faqicon">\n      <i class="fi-graph-trend"></i>\n    </div>\n  </div>\n</div>\n\n<div class=\'graph-row\'>\n  <div class="row">\n    <div class="small-3 columns " id="faqicon">\n      <i class="fi-wrench"></i>\n    </div>\n    <div id="blurb_region" class="small-9 columns text-right">\n      <h1>How?</h1>\n      <p class="lead">Chartzapp is a <strong>Single Page Application</strong> built using\n        open source tools.<p>\n      <p>It relies entirely on the chart data collected, edited and compiled by <a href="http://www.earshot-online.com/" target="blank">!earshot.</a></p>\n      <p>It is written almost entirely in\n        <a href="http://coffeescript.org/" target="blank">Coffeescript</a>\n        on both the front and\n        back-end. It uses <a href="http://nodejs.org/" target="blank">Node.js</a>\n        to run a server and webcrawler, which stores data in a\n        <a href="http://www.mongodb.org/" target="blank">MongoDB</a> database,\n        and then compares, analyzes and displays things with\n        <a href="http://backbonejs.org" target="blank">Backbone</a>,\n        <a href="http://marionettejs.com/" target="blank">Marionette</a>,\n        and <a href="http://d3js.org/" target="blank">D3</a>.\n        It\'s styled using the excellent\n        <a href="http://foundation.zurb.com/" target="blank">Foundation</a>\n        responsive framework.</p>\n    </div>\n  </div>\n</div>\n\n\n\n<div class=\'panel-row\'>\n  <div class="row">\n    <div id="blurb_region" class="small-9 columns">\n      <h1>When?</h1>\n      <p class="lead"><strong>Now</strong>, and hopefully, <strong>Forever!</strong></p>\n      <p>The database currently extends from December 31st, 2013 to the Present</p>\n      <ul>\n        <li>Beta Release: <strong>June 10th, 2014</strong></li>\n        <li>Alpha Deploy: <strong>March 21st, 2014</strong></li>\n        <li>First Keystrokes: <strong>3:39 PM (EDT)</strong> on <strong>March 15th, 2014</strong></li>\n      </ul>\n    </div>\n    <div class="small-3 columns text-right" id="faqicon">\n      <i class="fi-calendar"></i>\n    </div>\n  </div>\n</div>\n'});"function"==typeof define&&define.amd?define([],function(){return r}):"object"==typeof n&&n&&n.exports&&(n.exports=r)}),require.register("modules/artists/artists_app",function(t,e,n){var r,i={}.hasOwnProperty,o=function(t,e){function n(){this.constructor=t}for(var r in e)i.call(e,r)&&(t[r]=e[r]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t};r=e("application"),n.exports=r.module("ArtistsApp",function(t,n,r,i,a){var s,l;return t.Router=function(t){function e(){return l=e.__super__.constructor.apply(this,arguments)}return o(e,t),e.prototype.appRoutes={"artist(/)(:artist)":"showArtists"},e}(i.AppRouter),t.startWithParent=!1,t.Show=e("modules/artists/show/show_controller"),s={showArtists:function(e){return new t.Show.Controller({region:n.mainRegion,artist:e?e:void 0}),a(document).foundation()}},n.addInitializer(function(){return new t.Router({controller:s})})})}),require.register("modules/artists/show/graph",function(t,e,n){var r;r=e("application"),n.exports=function(t,n,r,i,o){var a,s,l,c,u,p,d,h,f,m,g,y,v,b,w,x,C,k,S,A,I,R,D,F;return f={top:20,right:50,bottom:50,left:50},A=$("#graph-region").width()-f.left-f.right,c=500-f.top-f.bottom,b=d3.time.format("%Y-%m-%d").parse,I=d3.time.scale().range([0,A-140]),D=d3.scale.linear().range([0,c]),s=e("colorList"),R=d3.svg.axis().scale(I).orient("bottom"),F=d3.svg.axis().scale(D).orient("left"),S=d3.select(t).append("svg").attr("width",A+f.left+f.right).attr("height",c+f.top+f.bottom).append("g").attr("transform","translate("+f.left+","+f.top+")"),x=function(){return A=$("#graph-region").width()-f.left-f.right,I.range([0,A]),d3.select("svg").remove(),S=d3.select(t).append("svg").attr("width",A+f.left+f.right).attr("height",c+f.top+f.bottom).append("g").attr("transform","translate("+f.left+","+f.top+")"),l(r)},$(window).on("resize",x),a=function(t){var e;return e=t._id,i.trigger("click:station:item",e)},p=function(t){return d3.selectAll("g path, circle").transition().duration(100).style("opacity",.2),d3.select(this).transition().duration(100).style("stroke-width","10px").style("opactiy",1),d3.selectAll("g ."+t._id+" circle").transition().duration(100).attr("r","10").style("opacity",1).forEach(function(t){return t.forEach(function(e,n){return k(t,e,n)})}),d3.select("."+t._id+" text").transition().duration(100).style("font-weight","bold")},m=function(t){return d3.selectAll("g path, circle").transition().duration(100).style("opacity",1).attr("r",5),d3.select(this).transition().duration(100).style("stroke-width","1.5px"),d3.select("."+t._id+" text").transition().duration(100).style("font-weight","normal"),u()},d=function(t){return C(this,t),d3.select(this).transition().duration(100).attr("r","10"),d3.select("."+t._id+" text").transition().duration(100).style("font-weight","bold")},g=function(t){return u(this),d3.select(this).transition().duration(100).attr("r","5"),d3.select("."+t._id+" text").transition().duration(100).style("font-weight","normal")},h=function(t){return d3.select(this).transition().duration(100).style("font-weight","bold"),d3.selectAll("g path, circle").transition().duration(100).style("opacity",.2),d3.selectAll("g ."+t._id+" path").transition().duration(100).style("stroke-width","10px").style("opacity",1),d3.selectAll("g ."+t._id+" circle").transition().duration(100).attr("r","10").style("opacity",1),d3.selectAll("."+t._id+" circle").forEach(function(t){return t.forEach(function(e,n){return k(t,e,n)})})},k=function(t,e,n){var r,i,o,a;return o=parseInt(e.cx.animVal.value),a=parseInt(e.cy.animVal.value),i=[o,a],$("#graph").append("<div class='tip' id='"+t[n].__data__._id+"-"+n+"'></div>"),r=$("#"+t[n].__data__._id+"-"+n),n%2?r.css("top",i[1]+50+"px"):r.css("top",i[1]-50+"px"),r.css("left",i[0]+50+"px").css("background",s(t[n].__data__._id)),$("#"+t[n].__data__._id+"-"+n).html(""+t[n].__data__._id.toUpperCase()+"<br />\n# "+t[n].__data__.position+" <br />\n"+t[n].__data__.week),$("#"+t[n].__data__._id+"-"+n).fadeIn(100)},y=function(t){return d3.select(this).transition().duration(100).style("font-weight","normal"),d3.selectAll("g path, circle").transition().duration(100).style("opacity",1).style("stroke-width","1.5px").attr("r",5),d3.selectAll("g ."+t._id+" circle").transition().duration(100).attr("r",5),u()},C=function(t,e){var n,r;return r=d3.mouse(t),$("#graph").append("<div class='tip'></div>"),n=d3.select(".tip"),n.style("left",r[0]+15+"px").style("top",r[1]-50+"px").style("background",s(e._id)),$(".tip").html("Station: "+e._id.toUpperCase()+"<br />\nPosition: "+e.position+" <br />\nWeek: "+e.week),$(".tip").fadeIn(100)
},u=function(){return $(".tip").fadeOut(50).remove()},v=function(t){var e,n,r;return n=[],r={},_.each(t.models,function(t){var e;return e=t.get("appearancesCollection"),_.each(e.models,function(t){return r[t.attributes.station]?r[t.attributes.station].appearances.push({position:t.attributes.position,week:t.attributes.week,score:31-t.attributes.position}):r[t.attributes.station]={appearances:[{position:t.attributes.position,week:t.attributes.week,score:31-t.attributes.position}]}})}),e=Object.keys(r),_.each(e,function(t){return n.push({_id:t,appearances:r[t].appearances})}),n.sort(function(t,e){var n,r;return n=o.findWhere({name:t._id.toUpperCase()}),r=o.findWhere({name:e._id.toUpperCase()}),t=n.get("postalCode"),e=r.get("postalCode"),t===e?0:t>e?-1:1})},w=function(t){var e,n,r;return n=[],r={},_.each(t.models,function(t){var e;return e=t.get("appearancesCollection"),_.each(e.models,function(t){return r[t.attributes.week]?r[t.attributes.week].appearances.push({station:t.attributes.station,position:t.attributes.position}):r[t.attributes.week]={appearances:[{station:t.attributes.station,position:t.attributes.position}]}})}),e=Object.keys(r),_.each(e,function(t){return n.push({week:t,appearances:r[t].appearances})}),n},(l=function(e){var r,i,o,l,u,x,k,T,V,L,q,H,M,P,Y,U,O,N;P=v(n),q=function(){return 0!==$(t).find(".info").length?$(".info").remove():$(t).append("<div class='tip text-center info'></div>").find(".tip").css("width",A+f.left+f.right+"px").css("margin","auto").css("top",c/3+"px").html(u).on("click",l).fadeIn(100)},l=function(){return $(t).find(".info").fadeOut(100),$(".info").remove()},0!==$(t).find(".infobox").length&&$(".infobox").remove(),$(t).prepend("<div class='button tiny radius infobox'></div>").find(".infobox").html("<i class='fi-info large'></i>").on("click",q),$(t).find("svg").on("click",l),P.forEach(function(t){return t.appearances.forEach(function(t){return t.date=b(t.week)})}),"stations"===e&&(u="<br />\nThis graph displays the number of stations "+n.artist+" is charting\non over time.<br />\n<br />\n(Click anywhere to hide)\n<br />\n<br />",I=d3.time.scale().range([0,A-140]),D=d3.scale.linear().range([0,c]),O=d3.scale.linear().range([0,c]),k=d3.svg.line().x(function(t){return I(t.week)}).y(function(t){var e;return e=0,_.each(t.appearances,function(t){return e+=31-t.position}),D(e)}),r=d3.svg.area().x(function(t){return I(t.week)}).y0(function(t){return D(t.y0)}).y1(function(t){return D(t.y0+t.y)}),H=d3.layout.stack().values(function(t){return t.values}),U=w(n),U.forEach(function(t){return t.week=b(t.week)}),L={},_.each(U,function(t){return _.each(t.appearances,function(e){return L[t.week]?L[t.week]+=31-e.position:L[t.week]=31-e.position})}),V=[],_.each(L,function(t,e){return V.push({week:e,score:t})}),console.log(P),I.domain([d3.min(U,function(t){return t.week}),d3.max(U,function(t){return t.week})]),D.domain([d3.max(V,function(t){return t.score}),0]),O.domain([d3.max(U,function(t){return t.appearances.length}),0]),F=d3.svg.axis().scale(D).orient("left"),N=d3.svg.axis().scale(O).orient("right"),R=d3.svg.axis().scale(I).orient("bottom"),S.append("g").attr("class","x axis").attr("transform","translate(0,"+c+")").call(R),S.append("g").attr("class","y axis").call(F).append("text").attr("transform","rotate(-90)").attr("y",6).attr("dy","-3em").style("text-anchor","end").text("Chartscore"),S.append("g").attr("class","y2 axis").attr("transform","translate("+(A-f.right)+", 0)").call(N).append("text").attr("transform","rotate(-90)").attr("y",6).attr("dy","-3em").style("text-anchor","end").text("Number of Stations"),Y=S.selectAll(".week").data(U).enter().append("g").attr("class",function(t){return"week of "+t.week}),Y.append("path").attr("class","line").attr("d",function(){return U.sort(function(t,e){return t.week-e.week}),k(U)}).style("stroke",function(t){return s(t)}).on("mouseover",p).on("mouseout",m),Y.append("circle").attr("class",function(t){return"dot "+t.week}).style("fill",function(t){return s(t._id)}).attr("r",5).attr("cx",function(t){return I(t.week)}).attr("cy",function(t){return O(t.appearances.length)}),M=S.selectAll(".station").data(U)),"line"===e?(u="<br />\nThis graph displays all appearances of "+n.artist+" over the\nselected time range, organized by station.<br />\nThe X-Axis is determined by the date of the appearance.<br />\nThe Y-Axis is determined by the album's position.<br />\nMouseover any dot or line for more information.<br />\n<br />\n(Click anywhere to hide)\n<br />\n<br />",k=d3.svg.line().x(function(t){return I(t.date)}).y(function(t){return D(t.position)}),I.domain([d3.min(P,function(t){return d3.min(t.appearances,function(t){return t.date})}),d3.max(P,function(t){return d3.max(t.appearances,function(t){return t.date})})]),D.domain([1,30]),S.append("g").attr("class","x axis").attr("transform","translate(0,"+c+")").call(R),S.append("g").attr("class","y axis").call(F).append("text").attr("transform","rotate(-90)").attr("y",6).attr("dy","-3em").style("text-anchor","end").text("Position"),M=S.selectAll(".station").data(P).enter().append("g").attr("class",function(t){return"station "+t._id}),M.append("path").attr("class","line").attr("d",function(t){return t.appearances.sort(function(t,e){return t.date-e.date}),k(t.appearances)}).style("stroke",function(t){return s(t._id)}).on("mouseover",p).on("mouseout",m),o=M.selectAll("circle").data(function(t){return t.appearances.forEach(function(e){return e._id=t._id}),t.appearances}).enter().append("circle").attr("class",function(t){return"dot "+t._id+" "+t.week}).style("fill",function(t){return s(t._id)}).attr("r",5).attr("cx",function(t){return I(t.date)}).attr("cy",function(t){return D(t.position)}).on("mouseover",d).on("click",a).on("mouseout",g),x=S.selectAll(".legend").data(P).enter().append("g").attr("class",function(t){return"legend "+t}).attr("transform",function(t,e){return 20>e?"translate(-70,"+20*e+")":e>=20?"translate(5,"+20*(e-20)+")":void 0}),x.append("rect").attr("x",A-10).attr("width",18).attr("height",18).style("fill",function(t){return s(t._id)}),x.append("text").attr("x",A-15).attr("y",9).attr("dy",".35em").style("text-anchor","end").text(function(t){return t._id.toUpperCase()}),x.on("mouseover",h).on("mouseout",y)):"bar"===e&&(u="<br />\nThis graph displays the number of appearances of "+n.artist+"\nover the selected time range, organized by station.<br />\nThe X-Axis is determined by the station.<br />\nThe Y-Axis is determined by the number of appearances.<br />\nMouseover any bar for more information.<br />\n<br />\n(Click anywhere to hide)\n<br />\n<br />",f.right=f.left,i=A/P.length,I=d3.scale.linear().range([0,A-75]),D=d3.scale.linear().range([c,0]),F=d3.svg.axis().scale(D).orient("left"),I.domain([0,P.length]),D.domain([0,d3.max(P,function(t){return t.appearances.length})]),S.append("g").attr("class","y axis").call(F).append("text").attr("transform","rotate(-90)").attr("y",6).attr("dy","-3em").style("text-anchor","end").text("# of Appearances"),T=function(t){return d3.selectAll("g rect").transition().duration(100).style("opacity",.2),d3.select("g ."+t._id+" > rect").transition().duration(100).style("opacity",1),d3.select("g ."+t._id+" > text").transition().duration(100).style("font-weight","bold"),C(t)},m=function(){return d3.selectAll("g rect").transition().duration(100).style("opacity",1),d3.selectAll("g text").transition().duration(100).style("font-weight","normal"),$(".tip").fadeOut(50).remove()},C=function(t){var e;return $("#graph").append("<div class='tip'></div>"),e=d3.select(".tip"),e.style("left",A-100+"px").style("top","50px").style("background",s(t._id)),$(".tip").html(""+t._id.toUpperCase()+" <br />\nTotal Appearances: "+t.appearances.length+"<br />\nHighest Position: "+d3.min(t.appearances,function(t){return t.position})+"<br />\nFirst: "+d3.min(t.appearances,function(t){return t.week})+"<br />\nMost Recent: "+d3.max(t.appearances,function(t){return t.week})),$(".tip").fadeIn(100)},M=S.selectAll(".station").data(P).enter().append("g").attr("transform",function(t,e){return"translate("+e*i+",0 )"}).attr("class",function(t){return"station "+t._id}),M.append("rect").attr("class","bar").attr("width",i-1).attr("height",function(t){return c-D(t.appearances.length)}).attr("y",function(t){return 3+D(t.appearances.length)}).style("fill",function(t){return s(t._id)}).on("mouseover",T).on("mouseout",m).on("click",a),M.append("text").attr("y",i/2-i).attr("x",function(){return c}).attr("dx",".75em").text(function(t){return t._id.toUpperCase()}).attr("transform","rotate(90)"))})(r)}}),require.register("modules/artists/show/landingGraph",function(t,e,n){var r,i;r=e("application"),i=function(t){var e,n,r;return r=function(){switch(!1){case!t:return moment(t);default:return moment()}}(),e=r.get("day"),n=function(){switch(!1){case 0!==e:return r.day(-5);case 1!==e:return r.day(-5);case 2!==e:return r;case!(e>2):return r.day(2)}}(),n=moment(n),n.format("YYYY-MM-DD")},n.exports=function(t,n,r){var i,o,a,s,l,c,u,p,d,h,f,m,g,y,v,b,w,_,x;return u={top:100,right:120,bottom:50,left:50},v=$("#graph-region").width()-u.left-u.right,l=500-u.top-u.bottom,_=d3.scale.linear().range([0,l]),b=d3.scale.linear().range([0,v-100]),s=e("colorList"),w=d3.svg.axis().scale(b).orient("bottom"),x=d3.svg.axis().scale(_).orient("left"),y=d3.select(t).append("svg").attr("width",v+u.left+u.right).attr("height",l+u.top+u.bottom).append("g").attr("transform","translate("+(u.left+20)+","+u.top+")"),o=n.models,h=d3.scale.linear(),h.domain(d3.extent(o,function(t){return t.attributes.frontPoints})),h.range([5,130]),_.domain([d3.max(o,function(t){return t.attributes.appearances.length}),d3.min(o,function(t){return t.attributes.appearances.length})]),b.domain(d3.extent(o,function(t){return t.attributes.frontPoints})),y.append("g").attr("class","x axis").attr("transform","translate(0,"+l+")").call(w),0!==o.length&&y.append("g").attr("class","y axis").attr("transform","translate(-10,0)").call(x).append("text").attr("transform","rotate(-90)").attr("y",6).attr("dy",".71em").style("text-anchor","end").text("# of Appearances"),d=function(t){return d3.selectAll("g circle").transition().duration(100).style("opacity",.2),d3.select("g ."+t.attributes.slug).transition().duration(100).style("opacity",1),f(this,t)},p=function(){return d3.selectAll("g circle").transition().duration(100).style("opacity",1),$(".tip").fadeOut(50).remove()},a=function(t){var e;return e=t.attributes.artist,r.trigger("click:album:circle",e)},f=function(t,e){var n,r;return r=d3.mouse(t),$("#graph").append("<div class='tip'></div>"),n=d3.select(".tip"),n.style("left","150px").style("top","50px").style("background",s(e.attributes.rank)),$(".tip").html("#"+e.attributes.rank+": "+e.attributes.artist+" <br />\n"+e.attributes.album+"<br />\nTotal Appearances: "+e.attributes.appearances.length+"<br />\nChartscore: "+e.attributes.frontPoints+"<br />\nFirst Appearance: "+e.attributes.firstWeek+"<br />\nAppeared on "+e.attributes.stations.length+" / "+e.attributes.totalStations+" stations"),$(".tip").fadeIn(100)},m=function(){return $(t).append("<div class='tip text-center'></div>").find(".tip").css("width",v+u.left+u.right+"px").css("margin","auto").css("top",l/2+"px").html("<br />\nSorry, No Data is available for the selected Time Range.\n<br />\n<br />").fadeIn(100)},g=function(){return 0!==$(t).find(".tip").length?$(".info").remove():$(t).append("<div class='tip text-center info'></div>").find(".tip").css("width",v+u.left+u.right+"px").css("margin","auto").css("top",l/3+"px").html("<br />\nThis graph displays the top albums for all stations over the selected time range.<br />\nThe X-Axis and the Radius of each circle is determined by the album's Chartscore.<br />\nThe Y-Axis is determined by the album's total number of appearances.<br />\n<br />\nMouseover any circle for more information.<br />\n<br />\n(Click anywhere to hide)\n<br />\n<br />").on("click",c).fadeIn(100)},c=function(){return $(t).find(".info").fadeOut(100),$(".info").remove()},$(t).prepend("<div class='button tiny radius infobox'></div>").find(".infobox").html("<i class='fi-info large'></i>").on("click",g),$(t).find("svg").on("click",c),i=y.selectAll("circle").data(o).enter().append("circle").attr("fill",function(t){return s(t.attributes.rank)}).attr("class",function(t){return"dot "+t.attributes.slug}).attr("cy",function(t){var e;return e=t.attributes.appearances.length,_(e)}).attr("cx",function(t){return b(t.attributes.frontPoints)}).attr("r",function(t){return h(t.attributes.frontPoints)}),i.on("mouseover",d).on("mouseout",p).on("click",a),0===o.length?m():void 0}}),require.register("modules/artists/show/show_controller",function(t,e,n){var r,i,o,a=function(t,e){return function(){return t.apply(e,arguments)}},s={}.hasOwnProperty,l=function(t,e){function n(){this.constructor=t}for(var r in e)s.call(e,r)&&(t[r]=e[r]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t};r=e("application"),i=e("modules/artists/artists_app"),o=e("controllers/baseController"),n.exports=r.module("ArtistsApp.Show",function(t,n,r,i,o,s){var c,u,p,d,h,f,m,g,y,v,b;return t.Controller=function(e){function r(){return this.mainView=a(this.mainView,this),c=r.__super__.constructor.apply(this,arguments)}return l(r,e),r.prototype.initialize=function(t){var e,r=this;return this.opts=t,e=n.request("artist:entities",t.artist),this.layout=this.getLayoutView(),this.listenTo(this.layout,"show",function(){return r.mainView(e)}),this.show(this.layout,{region:n.mainRegion,loading:!1})},r.prototype.mainView=function(t){return this.opts.artist?this.showArtist(t):this.showStart()},r.prototype.showArtist=function(t){var e,r=this;return n.execute("when:fetched",t,function(){return o(document).foundation(),0===t.length?r.showEmpty():void 0}),e=this.getArtistsView(t),this.show(e,{region:this.layout.tableRegion,loading:!0}),this.showPanel(t),this.showTitle(t),this.showGraph(t)},r.prototype.showTitle=function(t){var e;return e=this.getTitleView(t),this.listenTo(e,"click:pop:station",function(t){return n.navigate("station/"+t.text,{trigger:!0})}),this.show(e,{region:this.layout.titleRegion,loading:!0})},r.prototype.showGraph=function(t){var e;return e=this.getGraphView(t),this.listenTo(e,"click:station:item",function(t){return t=encodeURIComponent(t),n.navigate("station/"+t,{trigger:!0})}),this.show(e,{region:this.layout.graphRegion,loading:!0})},r.prototype.showEmpty=function(){var t;return t=this.getEmptyView(),this.listenTo(t,"click:search",function(t){return t=encodeURIComponent(t),n.navigate("artist/"+t,{trigger:!0})}),this.show(t,{region:this.layout.tableRegion})},r.prototype.showStart=function(){var t;return t=this.getStartView(),this.listenTo(t,"click:search",function(t){return t=encodeURIComponent(t),n.navigate("artist/"+t,{trigger:!0})}),this.show(t,{region:this.layout.tableRegion})},r.prototype.showPanel=function(t){var e;return e=this.getPanelView(t),this.slug="",this.listenTo(e,"click:albumButton",function(e){return"cz_all"===e?(this.slug="",t.resetFilters()):(this.slug=e,t.resetAndAddFilter({slug:e}))}),this.show(e,{region:this.layout.panelRegion,loading:!0})},r.prototype.getTitleView=function(e){return new t.Title({collection:e})},r.prototype.getGraphView=function(e){return new t.Graph({collection:e})},r.prototype.getEmptyView=function(){return new t.EmptyView},r.prototype.getArtistsView=function(e){return new t.Artist({collection:e})},r.prototype.getStartView=function(){return new t.Start},r.prototype.getPanelView=function(e){return new t.Panel({collection:e})},r.prototype.getLayoutView=function(){return new t.Layout},r}(n.Controllers.Base),t.Layout=function(t){function e(){return u=e.__super__.constructor.apply(this,arguments)}return l(e,t),e.prototype.template="modules/artists/show/templates/show_layout",e.prototype.regions={titleRegion:"#title-region",panelRegion:"#panel-region",graphRegion:"#graph-region",tableRegion:"#table-region"},e}(i.Layout),t.Title=function(t){function e(){return d=e.__super__.constructor.apply(this,arguments)}return l(e,t),e.prototype.template="modules/artists/show/templates/title",e.prototype.events={"click #popStation":"popStation"},e.prototype.popStation=function(t){return this.trigger("click:pop:station",t.target)},e}(i.ItemView),t.Panel=function(t){function e(){return h=e.__super__.constructor.apply(this,arguments)}return l(e,t),e.prototype.template="modules/artists/show/templates/panel",e.prototype.className="",e.prototype.events={"click a.albumlink":"showGraph","click a.button":"showFilters"},e.prototype.showGraph=function(t){return t.preventDefault(),o(t.target).parent().parent().find(".active").removeClass("active"),o(t.target).parent("dd").toggleClass("active"),this.trigger("click:albumButton",t.target.id)},e.prototype.showFilters=function(t){return t.preventDefault(),o("#filters").hasClass("hide")?(o("#filters").slideDown().toggleClass("hide"),o(t.target).text("Hide Filters")):(o("#filters").slideUp().toggleClass("hide"),o(t.target).text("Show Filters"))},e}(i.ItemView),t.Graph=function(t){function r(){return f=r.__super__.constructor.apply(this,arguments)}return l(r,t),r.prototype.template="modules/artists/show/templates/graph",r.prototype.ui={typeSelect:"#type-select"},r.prototype.events={"change @ui.typeSelect":"select"},r.prototype.selectOptions={"Appearances By Station":"bar","Appearances By Station Over Time":"line"},r.prototype.select=function(t){return t.preventDefault(),this.graphType=this.ui.typeSelect.val(),this.graph(this.graphType)},r.prototype.buildGraph=e("modules/artists/show/graph"),r.prototype.graphType="bar",r.prototype.graph=function(t){var e=this;return d3.select("svg").remove(),n.execute("when:fetched",this.stations,function(){return e.buildGraph(e.el,e.collection,t,e,e.stations)})},r.prototype.id="graph",r.prototype.collections=[],r.prototype.initialize=function(){var t=this;return this.stations=n.request("stations:entities"),n.execute("when:fetched",this.collection,function(){return s.each(t.collection.models,function(e){return t.collections.push(e.get("appearancesCollection"))}),s.each(t.collections,function(e){return t.listenTo(e,"filter",function(){return t.render()})}),t.listenTo(t.collection,"filter",function(){return t.render()})})},r.prototype.onRender=function(){return matchMedia(Foundation.media_queries.medium).matches?(this.ui.typeSelect.find("option[value='"+this.graphType+"']").attr("selected",!0),this.graph(this.graphType)):void 0},r}(i.ItemView),t.Empty=function(t){function e(){return m=e.__super__.constructor.apply(this,arguments)}return l(e,t),e.prototype.template="modules/artists/show/templates/empty",e}(i.ItemView),t.EmptyView=function(t){function e(){return g=e.__super__.constructor.apply(this,arguments)}return l(e,t),e.prototype.template="modules/artists/show/templates/emptyview",e.prototype.ui={artistInput:"#artist_input"},e.prototype.events={submit:"submit"},e.prototype.submit=function(t){var e;return t.preventDefault(),e=o.trim(this.ui.artistInput.val()),this.trigger("click:search",e)},e}(i.ItemView),t.Start=function(t){function e(){return y=e.__super__.constructor.apply(this,arguments)}return l(e,t),e.prototype.template="modules/artists/show/templates/start",e.prototype.ui={artistInput:"#artist_input"},e.prototype.events={submit:"submit"},e.prototype.submit=function(t){var e;return t.preventDefault(),e=o.trim(this.ui.artistInput.val()),this.trigger("click:search",e)},e}(i.ItemView),t.Appearance=function(t){function e(){return v=e.__super__.constructor.apply(this,arguments)}return l(e,t),e.prototype.template="modules/artists/show/templates/appearance",e.prototype.tagName="tr",e}(i.ItemView),t.Album=function(e){function r(){return this.clickHeader=a(this.clickHeader,this),b=r.__super__.constructor.apply(this,arguments)}return l(r,e),r.prototype.template="modules/artists/show/templates/artistItem",r.prototype.initialize=function(){return this.collection=this.model.get("appearancesCollection")},r.prototype.itemView=t.Appearance,r.prototype.itemViewContainer="tbody",r.prototype.tagName="div",r.prototype.events={"click a":"clickStation","click th":"clickHeader"},r.prototype.clickStation=function(t){return t.preventDefault(),n.navigate("station/"+encodeURIComponent(t.target.text),{trigger:!0})},r.prototype.sortUpIcon="fi-arrow-down",r.prototype.sortDnIcon="fi-arrow-up",r.prototype.onRender=function(){return this.$el.find(".chosen-select").chosen(),this.$("[column]").append(o("<i>")).closest("th").find("i").addClass("fi-minus-circle size-18"),this.$("[column='"+this.collection.sortAttr+"']").find("i").removeClass("fi-minus-circle").addClass(this.sortUpIcon),this},r.prototype.clickHeader=function(t){var e,n,r;e=o(t.currentTarget),r=e.attr("column"),n=this.collection.sortAttr,r===n?this.collection.sortDir*=-1:this.collection.sortDir=1,o("th").find("i").attr("class","fi-minus-circle size-18"),e.find("i").removeClass("fi-minus-circle").addClass(1===this.collection.sortDir?this.sortUpIcon:this.sortDnIcon),this.collection.sortCharts(r)},r}(i.CompositeView),t.Artist=function(e){function r(){return p=r.__super__.constructor.apply(this,arguments)}return l(r,e),r.prototype.template="modules/artists/show/templates/artists",r.prototype.itemView=t.Album,r.prototype.emptyView=t.Empty,r.prototype.itemViewContainer="#theplace",r.prototype.ui={position:"#position",station:"#station",week:"#week",clear:"#clearFilters"},r.prototype.events={"change input":"submit","change .chosen-select":"submit","click @ui.clear":"clearFilters"},r.prototype.collections=[],r.prototype.initialize=function(){var t,e=this;return this.filters=[],this.bigList={},t="appearancesCollection",n.execute("when:fetched",this.collection,function(){var n,r,i,a;for(e.collection.countPoints(),o(document).foundation(),e.collection.initializeFilters(),a=e.collection.models,r=0,i=a.length;i>r;r++)n=a[r],e.collections.push(n.get(t));return s.each(e.collections,function(t,n){return t.initializeFilters(),e.filters[n]=t.getFilterLists()})})},r.prototype.onRender=function(){var t,e=this;return t=Object.keys(this.filters[0]),s.each(t,function(t){return e.bigList[t]=[]}),s.each(this.filters,function(n){return s.each(t,function(t){return e.bigList[t].push(n[t])})}),s.each(t,function(t){return e.bigList[t]=s.uniq(s.flatten(s.union(e.bigList[t]))),e.bigList[t].sort(function(e,n){return e===n?0:"position"===t?+e>+n?1:-1:"week"===t?moment(e)>moment(n)?1:-1:e>n?1:-1})}),s.each(this.bigList,function(t,n){return s.each(t,function(t){return e.$el.find("#"+n).append("<option value='"+t+"'>"+t.toUpperCase()+"</option>").attr("disabled",!1)})}),this.$el.find(".chosen-select").chosen().trigger("chosen:updated"),this.collection.on("filter",function(){return e.makeFilterLists()})},r.prototype.submit=function(t,e){var n,r,i;return t.preventDefault(),r={},n=t.target.id,i=e.selected?e.selected:e.deselected,r[n]=i,e.selected?this.addFilter(r):this.removeFilter(r)},r.prototype.clearFilters=function(t){return t.preventDefault(),s.each(this.collections,function(t){return t.resetFilters()}),this.$el.find("option").attr("disabled",!1),this.$el.find(".chosen-select").val("[]").trigger("chosen:updated")},r.prototype.addFilter=function(t){return s.each(this.collections,function(e){return e.addFilter(t)}),this.updateFilters(t)},r.prototype.removeFilter=function(t){return s.each(this.collections,function(e){return e.removeFilter(t)}),this.updateFilters(t)},r.prototype.makeFilterLists=function(){var t=this;return this.$el.find("option").attr("disabled",!0),s.each(this.collection.models,function(e){var n;return n=e.attributes.appearancesCollection.initializeFilterLists(),s.each(n,function(e){return s.each(e,function(e){return t.$el.find("option[value='"+e+"']").attr("disabled",!1)})})}),this.$el.find(".chosen-select").chosen().trigger("chosen:updated")},r.prototype.updateFilters=function(t){var e,n=this;return e=Object.keys(t),this.$el.find("option").attr("disabled",!0),s.each(this.collections,function(t){var r;return r=t.getUpdatedFilterLists(e),s.each(r,function(t){return s.each(t,function(t){return n.$el.find("option[value='"+t+"']").attr("disabled",!1)})})}),this.$el.find(".chosen-select").chosen().trigger("chosen:updated")},r}(i.CompositeView)})}),require.register("modules/artists/show/templates/appearance",function(t,e,n){var r=Handlebars.template(function(t,e,n,r,i){this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,t.helpers),i=i||{};var o,a,s,l="",c="function",u=this.escapeExpression,p=n.helperMissing;return l+="<td>",(a=n.position)?o=a.call(e,{hash:{},data:i}):(a=e&&e.position,o=typeof a===c?a.call(e,{hash:{},data:i}):a),l+=u(o)+"</td>\n<td><a>"+u((a=n.toUpper||e&&e.toUpper,s={hash:{},data:i},a?a.call(e,e&&e.station,s):p.call(e,"toUpper",e&&e.station,s)))+"</a></td>\n<td>",(a=n.week)?o=a.call(e,{hash:{},data:i}):(a=e&&e.week,o=typeof a===c?a.call(e,{hash:{},data:i}):a),l+=u(o)+"</td>\n"});"function"==typeof define&&define.amd?define([],function(){return r}):"object"==typeof n&&n&&n.exports&&(n.exports=r)}),require.register("modules/artists/show/templates/artistItem",function(t,e,n){var r=Handlebars.template(function(t,e,n,r,i){function o(t,e){var r,i,o,a="";return a+="\n    <tr>\n      <td>"+p((r=t&&t.position,typeof r===u?r.apply(t):r))+"</td>\n      <td><a>"+p((i=n.toUpper||t&&t.toUpper,o={hash:{},data:e},i?i.call(t,t&&t.station,o):d.call(t,"toUpper",t&&t.station,o)))+"</a></td>\n      <td>"+p((r=t&&t.week,typeof r===u?r.apply(t):r))+"</td>\n    </tr>\n  "}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,t.helpers),i=i||{};var a,s,l,c="",u="function",p=this.escapeExpression,d=n.helperMissing,h=this;return c+="<!-- <h4>",(s=n.album)?a=s.call(e,{hash:{},data:i}):(s=e&&e.album,a=typeof s===u?s.call(e,{hash:{},data:i}):s),c+=p(a)+" - ",(s=n.label)?a=s.call(e,{hash:{},data:i}):(s=e&&e.label,a=typeof s===u?s.call(e,{hash:{},data:i}):s),c+=p(a)+'</h4> -->\n<div class="chart">\n  <table width="100%">\n    <thead>\n      <tr><th colspan="3">',(s=n.album)?a=s.call(e,{hash:{},data:i}):(s=e&&e.album,a=typeof s===u?s.call(e,{hash:{},data:i}):s),c+=p(a)+" - ",(s=n.label)?a=s.call(e,{hash:{},data:i}):(s=e&&e.label,a=typeof s===u?s.call(e,{hash:{},data:i}):s),c+=p(a)+" - "+p((a=e&&e.appearances,a=null==a||a===!1?a:a.length,typeof a===u?a.apply(e):a))+' appearances</th></tr>\n      <th column="position">Position</th>\n      <th column="station">Station</th>\n      <th column="week">Week</th>\n    </thead>\n    <tbody></tbody>\n  <!-- ',s=n.each_sort_date||e&&e.each_sort_date,l={hash:{},inverse:h.noop,fn:h.program(1,o,i),data:i},a=s?s.call(e,e&&e.appearances,"week",l):d.call(e,"each_sort_date",e&&e.appearances,"week",l),(a||0===a)&&(c+=a),c+=" -->\n  </table>\n</div>\n"});"function"==typeof define&&define.amd?define([],function(){return r}):"object"==typeof n&&n&&n.exports&&(n.exports=r)}),require.register("modules/artists/show/templates/artists",function(t,e,n){var r=Handlebars.template(function(t,e,n,r,i){return this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,t.helpers),i=i||{},'<div id="filters" class="hide ">\n  <div class="row">\n    <form>\n      <div class="medium-3 columns">\n        <select class="chosen-select" id="position" data-placeholder="Position" multiple>\n        </select>\n      </div>\n      <div class="medium-4 columns">\n        <select class="chosen-select" id="station" data-placeholder="Station" multiple>\n        </select>\n      </div>\n      <div class="medium-4 columns">\n        <select class="chosen-select" id="week" data-placeholder="Week" multiple>\n        </select>\n      </div>\n      <div class="medium-1 column">\n        <a class="button secondary tiny right" id="clearFilters" href="#">Clear</a>\n      </div>\n  </form>\n  </div>\n</div>\n\n<div id="theplace"></div>\n'});"function"==typeof define&&define.amd?define([],function(){return r}):"object"==typeof n&&n&&n.exports&&(n.exports=r)}),require.register("modules/artists/show/templates/empty",function(t,e,n){var r=Handlebars.template(function(t,e,n,r,i){return this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,t.helpers),i=i||{},'<th colspan="4">Sorry, Nothing Found.</th>\n'});"function"==typeof define&&define.amd?define([],function(){return r}):"object"==typeof n&&n&&n.exports&&(n.exports=r)}),require.register("modules/artists/show/templates/emptyview",function(t,e,n){var r=Handlebars.template(function(t,e,n,r,i){return this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,t.helpers),i=i||{},'<div class="panel small-12 columns">\n  <h4>Sorry, nothing found for that search.</h4>\n  <h5>Try again?</h5>\n  <form>\n    <div class="station-field">\n      <label>Artist:<input type="text" id="artist_input"></input></label>\n    </div>\n      <button type="submit">Search</button>\n  </form>\n</div>\n'});"function"==typeof define&&define.amd?define([],function(){return r}):"object"==typeof n&&n&&n.exports&&(n.exports=r)}),require.register("modules/artists/show/templates/graph",function(t,e,n){var r=Handlebars.template(function(t,e,n,r,i){return this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,t.helpers),i=i||{},'<div class="show-for-small-only">\n  <p class="lead">For now, ChartZapp\'s graphs are only available on larger screens.</p>\n  <p>If you\'d like to see more on a mobile device,\n  <a href="#" data-reveal-id="feedback">let me know!</a></p>\n\n</div>\n\n<div class="show-for-medium-up">\n  <div class="row">\n    <div class="small-4 columns">\n      <h3 class="">Visualizer:</h3>\n    </div>\n    <div class="small-4 columns end">\n      <select id="type-select">\n        <option value="bar">Appearances By Station</option>\n        <option value="line">Appearances By Station Over Time</option>\n      </select>\n    </div>\n  </div>\n</div>\n'});"function"==typeof define&&define.amd?define([],function(){return r}):"object"==typeof n&&n&&n.exports&&(n.exports=r)}),require.register("modules/artists/show/templates/panel",function(t,e,n){var r=Handlebars.template(function(t,e,n,r,i){function o(t){var e,n="";return n+='\n  <dd><a href="#" id="'+c((e=t&&t.slug,typeof e===l?e.apply(t):e))+'" class="albumlink">'+c((e=t&&t.album,typeof e===l?e.apply(t):e))+"</a></dd>\n  "}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,t.helpers),i=i||{};var a,s="",l="function",c=this.escapeExpression,u=this;return s+='<a class="button tiny right">Show Filters</a>\n<dl class="album-sub-nav">\n  <dt>Albums:</dt>\n  <dd class="active"><a href="#" class="albumlink" id="cz_all">All</a></dd>\n  ',a=n.each.call(e,e&&e.items,{hash:{},inverse:u.noop,fn:u.program(1,o,i),data:i}),(a||0===a)&&(s+=a),s+='\n</dl>\n\n<!-- <form>\n  <div class="row">\n    <div class="small-2 columns">\n      <label for="position" class="right inline">Position</label>\n    </div>\n    <div class="small-4 columns">\n      <select class="chosen-select" id="position" data-placeholder="Position" multiple>\n      </select>\n    </div>\n    <div class="small-2 columns">\n      <label for="station" class="right inline">Station</label>\n    </div>\n    <div class="small-4 columns">\n      <select class="chosen-select" id="station" data-placeholder="Station" multiple>\n      </select>\n    </div>\n  </div>\n  <div class="row">\n    <div class="small-2 columns">\n      <label for="week" class="right inline">Week</label>\n    </div>\n    <div class="small-4 columns">\n      <select class="chosen-select" id="week" data-placeholder="Week" multiple>\n      </select>\n    </div>\n    <div class="small-2 columns">\n      <label for="graph" class="right inline">Visualizer</label>\n    </div>\n    <div class="small-4 columns">\n      <select id="type-select">\n        <option value="bar">Appearances By Station</option>\n        <option value="line">Appearances By Station Over Time</option>\n      </select>\n    </div>\n  </div>\n  <div class="row">\n    <div class="small-1 column right">\n      <a class="button tiny secondary right" id="clearFilters" href="#">Clear</a>\n    </div>\n  </div>\n</form> -->\n'});"function"==typeof define&&define.amd?define([],function(){return r}):"object"==typeof n&&n&&n.exports&&(n.exports=r)}),require.register("modules/artists/show/templates/show_layout",function(t,e,n){var r=Handlebars.template(function(t,e,n,r,i){return this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,t.helpers),i=i||{},'<div id="artist_layout">\n  <div class="title-row">\n    <div id="title-region" class="small-12 columns"></div>\n  </div>\n  <div class="graph-row">\n    <div id="graph-region" class="small-12 columns"></div>\n  </div>\n  <div class="panel-row">\n    <div class="row">\n      <div id="panel-region" class="small-12 columns"></div>\n    </div>\n  </div>\n  <div class="graph-row">\n    <div class="row">\n    <div id="table-region" class="small-12 columns"></div>\n  </div>\n</div>\n</div>\n'
});"function"==typeof define&&define.amd?define([],function(){return r}):"object"==typeof n&&n&&n.exports&&(n.exports=r)}),require.register("modules/artists/show/templates/start",function(t,e,n){var r=Handlebars.template(function(t,e,n,r,i){return this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,t.helpers),i=i||{},'<div class="panel small-12 columns">\n  <h4>Enter an artist to get started</h4>\n  <form>\n    <div class="station-field">\n      <label>Artist:<input type="text" id="artist_input"></input></label>\n    </div>\n      <button type="submit">Search</button>\n  </form>\n</div>\n'});"function"==typeof define&&define.amd?define([],function(){return r}):"object"==typeof n&&n&&n.exports&&(n.exports=r)}),require.register("modules/artists/show/templates/startPanel",function(t,e,n){var r=Handlebars.template(function(t,e,n,r,i){this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,t.helpers),i=i||{};var o,a,s="",l="function",c=this.escapeExpression;return(a=n.desc)?o=a.call(e,{hash:{},data:i}):(a=e&&e.desc,o=typeof a===l?a.call(e,{hash:{},data:i}):a),s+=c(o)+'\n<div class="row">\n  <div class="large-8 columns">\n    <div class="row collapse">\n      <div class="small-2 columns">\n        <span class="prefix radius">Top</span>\n      </div>\n      <div class="small-8 columns">\n        <input id="number" type="number" placeholder="30"></input>\n      </div>\n      <div class="small-2 columns">\n        <span class="postfix radius"><i class="fi-record"></i></span>\n      </div>\n    </div>\n  </div>\n  <!-- <div class="small-4 columns">\n    <select id="time-select">\n      <option>This Year</option>\n      <option>This Month</option>\n      <option>This Week</option>\n    </select>\n  </div> -->\n  <div class="large-4 columns">\n    <div class="row collapse">\n      <div class="small-10 columns">\n        <input id="custom-range" type="text" placeholder="This Week"></input>\n      </div>\n      <div class="small-2 columns">\n        <span class="postfix radius"><i id="custom-range" class="fi-calendar"></i></span>\n      </div>\n    </div>\n  </div>\n<!-- </div> -->\n</div>\n'});"function"==typeof define&&define.amd?define([],function(){return r}):"object"==typeof n&&n&&n.exports&&(n.exports=r)}),require.register("modules/artists/show/templates/title",function(t,e,n){var r=Handlebars.template(function(t,e,n,r,i){function o(t){var e="";return e+=' <a class="label radius right" id="popStation">'+c(typeof t===l?t.apply(t):t)+"</a>"}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,t.helpers),i=i||{};var a,s="",l="function",c=this.escapeExpression,u=this;return s+='<div class="row">\n  <div class="small-8 columns">\n    <h1 class="artist-title">'+c((a=e&&e.items,a=null==a||a===!1?a:a[0],a=null==a||a===!1?a:a.artist,typeof a===l?a.apply(e):a))+'</h1>\n  </div>\n  <div class="small-4 columns">\n    <h2 class="right">Chartscore: <span class="header-label radius">'+c((a=e&&e.items,a=null==a||a===!1?a:a[0],a=null==a||a===!1?a:a.totalChartScore,typeof a===l?a.apply(e):a))+'</span></h2>\n  </div>\n</div>\n<div class="row">\n  <div class="small-6 columns">\n    <ul class="no-bullet">\n      <li>Most Charted: <span class="label radius right">'+c((a=e&&e.items,a=null==a||a===!1?a:a[0],a=null==a||a===!1?a:a.popAlbum,typeof a===l?a.apply(e):a))+"</span></li>\n      <li>Most Charted on:",a=n.each.call(e,(a=e&&e.items,a=null==a||a===!1?a:a[0],null==a||a===!1?a:a.popStation),{hash:{},inverse:u.noop,fn:u.program(1,o,i),data:i}),(a||0===a)&&(s+=a),s+='</li>\n      <!-- <li>ChartScore: <span class="label radius right">'+c((a=e&&e.items,a=null==a||a===!1?a:a[0],a=null==a||a===!1?a:a.totalChartScore,typeof a===l?a.apply(e):a))+'</span></li> -->\n    </ul>\n  </div>\n  <div class="small-6 columns">\n    <ul class="no-bullet">\n      <li>Albums: <span class="label radius right">'+c((a=e&&e.items,a=null==a||a===!1?a:a.length,typeof a===l?a.apply(e):a))+'</span></li>\n      <li>Appearances: <span class="label radius right">'+c((a=e&&e.items,a=null==a||a===!1?a:a[0],a=null==a||a===!1?a:a.totalAppearances,typeof a===l?a.apply(e):a))+"</span></li>\n\n    </ul>\n  </div>\n</div>\n"});"function"==typeof define&&define.amd?define([],function(){return r}):"object"==typeof n&&n&&n.exports&&(n.exports=r)}),require.register("modules/footer/footer_app",function(t,e,n){var r;r=e("application"),n.exports=r.module("FooterApp",function(t,n){var r;return t.startWithParent=!1,t.Show=e("modules/footer/show/show_controller"),r={showFooter:function(){return new t.Show.Controller({region:n.footerRegion})}},t.on("start",function(){return r.showFooter()})})}),require.register("modules/footer/show/show_controller",function(t,e,n){var r,i,o,a={}.hasOwnProperty,s=function(t,e){function n(){this.constructor=t}for(var r in e)a.call(e,r)&&(t[r]=e[r]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t};r=e("application"),o=e("modules/footer/footer_app"),i=e("controllers/baseController"),n.exports=r.module("FooterApp.Show",function(t,e,n,r){var i,o;return t.Footer=function(t){function e(){return i=e.__super__.constructor.apply(this,arguments)}return s(e,t),e.prototype.template="/views/templates/footer",e}(r.ItemView),t.Controller=function(e){function n(){return o=n.__super__.constructor.apply(this,arguments)}return s(n,e),n.prototype.initialize=function(){var t;return t=this.getFooterView(),this.show(t)},n.prototype.getFooterView=function(){return new t.Footer},n}(e.Controllers.Base)})}),require.register("modules/header/header_app",function(t,e,n){var r;r=e("application"),n.exports=r.module("HeaderApp",function(t,n){var r;return t.startWithParent=!1,t.List=e("modules/header/list/list_controller"),r={listHeader:function(){var e;return e=new t.List.Controller({region:n.headerRegion})}},t.on("start",function(){return r.listHeader()})})}),require.register("modules/header/list/list_controller",function(t,e,n){var r,i,o={}.hasOwnProperty,a=function(t,e){function n(){this.constructor=t}for(var r in e)o.call(e,r)&&(t[r]=e[r]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t};r=e("application"),i=e("modules/header/header_app"),n.exports=r.module("HeaderApp.List",function(t,e,n,r,i){var o,s,l;return t.Header=function(t){function n(){return o=n.__super__.constructor.apply(this,arguments)}return a(n,t),n.prototype.template="modules/header/list/templates/header",n.prototype.tagName="li",n.prototype.events={click:"nav"},n.prototype.nav=function(t){var n;return t.preventDefault(),n=this.model.get("path"),"http"===n.substring(0,4)?window.open(n):e.navigate(n,{trigger:!0})},n}(r.ItemView),t.Headers=function(n){function r(){return s=r.__super__.constructor.apply(this,arguments)}return a(r,n),r.prototype.template="modules/header/list/templates/headers",r.prototype.itemView=t.Header,r.prototype.itemViewContainer="ul.links",r.prototype.events={"click a#home":"home"},r.prototype.onRender=function(){var t=this;return i(document).on("open","#feedback",function(){return ga("send","event","click","open feedback"),i("a#clear").on("click",function(){return ga("send","event","click","clear feedback"),i("input, textarea").val(""),i("form div").removeClass("error"),i("form label").removeClass("error"),i("form")[0].reset()}),i("#feedback-form").on("invalid",function(){var t;return t=i(this).find("[data-invalid]"),ga("send","event","form","feedback form invalid")}).on("valid",Foundation.utils.debounce(function(e){return t.send(e)},300,!0))}),i(document).on("close","#feedback",function(){return i("div#alert-container").fadeOut(),i("form div").removeClass("error"),i("form label").removeClass("error"),i("form")[0].reset()})},r.prototype.send=function(t){return t.preventDefault(),i.post("/api/feedback",i("#feedback-form").serialize(),function(){return ga("send","event","submit","submit feedback"),i("input, textarea").val(""),i("div#alert-container").fadeIn("slow").removeClass("hide")})},r.prototype.home=function(t){var n;return t.preventDefault(),n="home",e.navigate(n,{trigger:!0})},r.prototype.clear=function(t){return t.preventDefault(),console.log("clicked")},r}(r.CompositeView),t.Controller=function(n){function r(){return l=r.__super__.constructor.apply(this,arguments)}return a(r,n),r.prototype.initialize=function(){return this.listHeader(),i(document).foundation()},r.prototype.listHeader=function(){var t,n;return n=e.request("header:entities"),window.links=n,t=this.getHeaderView(n),this.show(t)},r.prototype.getHeaderView=function(e){return new t.Headers({collection:e})},r}(e.Controllers.Base)})}),require.register("modules/header/list/templates/header",function(t,e,n){var r=Handlebars.template(function(t,e,n,r,i){this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,t.helpers),i=i||{};var o,a,s="",l="function",c=this.escapeExpression;return s+='<a><i class="',(a=n.icon)?o=a.call(e,{hash:{},data:i}):(a=e&&e.icon,o=typeof a===l?a.call(e,{hash:{},data:i}):a),s+=c(o)+'"></i>  ',(a=n.name)?o=a.call(e,{hash:{},data:i}):(a=e&&e.name,o=typeof a===l?a.call(e,{hash:{},data:i}):a),s+=c(o)+"</a>\n"});"function"==typeof define&&define.amd?define([],function(){return r}):"object"==typeof n&&n&&n.exports&&(n.exports=r)}),require.register("modules/header/list/templates/headers",function(t,e,n){var r=Handlebars.template(function(t,e,n,r,i){return this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,t.helpers),i=i||{},'<div id="feedback" class="reveal-modal small" data-reveal>\n  <h2>Thanks for trying out ChartZapp!</h2>\n  <p class="lead">The project is currently under active development,\n    and I\'d love to hear your thoughts about it!</p>\n    <div class="hide" id="alert-container">\n      <div data-alert id="success" class="hide alert-box success radius">\n        Thanks for your feedback!\n        <a href="#" class="close">&times;</a>\n      </div>\n    </div>\n  <form id="feedback-form" data-abide="ajax">\n    <div class="name-field">\n      <input type="text" placeholder="Name" id="name" name="name" required></input>\n      <small class="error">Please enter your name</small>\n    </div>\n    <div class="email-field">\n      <input type="email" placeholder="Email" id="email" name="email" required></input>\n      <small class="error">I can\'t respond without your email!</small>\n    </div>\n    <div class="message-field">\n      <textarea id="message" placeholder="Thoughts..." rows="10" name="message" required></textarea>\n      <small class="error">A message is kind of the point...</small>\n    </div>\n    <button id="form-submit" type="submit">Submit</button>\n    <a class="button secondary" id="clear">Clear</a>\n  </form>\n  <a class="close-reveal-modal">&#215;</a>\n</div>\n\n<div class="fixed">\n  <nav class="top-bar" data-topbar>\n    <ul class="title-area">\n      <li class="name"><h1><a id="home">!earshot :: ChartZapp!</a></h1></li>\n      <li class="toggle-topbar menu-icon"><a href="#"></a></li>\n    </ul>\n    <section class="top-bar-section">\n      <ul class="right links">\n        <li class="has-form right">\n          <a href="#" class="button radius" data-reveal-id="feedback"><i class="fi-mail"></i> Feedback!</a>\n        </li>\n      </ul>\n    </section>\n  </nav>\n</div>\n'});"function"==typeof define&&define.amd?define([],function(){return r}):"object"==typeof n&&n&&n.exports&&(n.exports=r)}),require.register("modules/landing/landing_app",function(t,e,n){var r,i={}.hasOwnProperty,o=function(t,e){function n(){this.constructor=t}for(var r in e)i.call(e,r)&&(t[r]=e[r]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t};r=e("application"),n.exports=r.module("LandingApp",function(t,n,r,i,a){var s,l;return t.Router=function(t){function e(){return l=e.__super__.constructor.apply(this,arguments)}return o(e,t),e.prototype.appRoutes={home:"landing"},e}(i.AppRouter),t.startWithParent=!1,t.Show=e("modules/landing/showLanding/showLanding_controller"),s={landing:function(){return new t.Show.Controller({region:n.mainRegion}),a(document).foundation()}},n.addInitializer(function(){return new t.Router({controller:s})})})}),require.register("modules/landing/showLanding/labelsGraph",function(t,e,n){var r,i,o;r=e("application"),i=function(t){var e;return e=function(t){return!isNaN(parseFloat(t))&&isFinite(t)},e(t.charAt(0))&&(t="_"+t),t.toLowerCase().replace(RegExp(" ","g"),"-").replace(/[^\w-]+/g,"")},o=function(t){var e,n,r;return r=function(){switch(!1){case!t:return moment(t);default:return moment()}}(),e=r.get("day"),n=function(){switch(!1){case 0!==e:return r.day(-5);case 1!==e:return r.day(-5);case 2!==e:return r;case!(e>2):return r.day(2)}}(),n=moment(n),n.format("YYYY-MM-DD")},n.exports=function(t,n,r){var o,a,s,l,c,u,p,d,h,f,m,g,y,v,b,w,x,C,k,S,A,I;return g={top:50,right:50,bottom:50,left:50},I=($("#circles-region").width()-g.left-g.right)/3,d=500-g.top-g.bottom,w=Math.min(I,d)/2,u=e("colorList"),s=d3.svg.arc().outerRadius(w-10).innerRadius(w-100),f=d3.layout.pie().sort(null).value(function(t){return t.chartScore}),k=d3.select(t).select("#labels").append("svg").attr("width",I+g.left+g.right).attr("height",d).append("g").attr("transform","translate("+I/2+", "+d/2+")"),a=n.models,m={},h=[],o={},_.each(a,function(t){var e;return""!==t.attributes.album?(e=t.get("label"),o[e]?o[e].push(t.get("album")):o[e]=[t.get("album")],m[e]?_.each(t.attributes.appearances,function(t){return m[e].push(t)}):(m[e]=[],_.each(t.attributes.appearances,function(t){return m[e].push(t)}))):void 0}),_.each(o,function(t){return t=_.uniq(t)}),_.each(m,function(t,e){return h.push({label:e,appearances:t,albums:o[e]})}),_.each(h,function(t){return t.chartScore=0,_.each(t.appearances,function(e){return t.chartScore+=31-+e.position})}),h=h.sort(function(t,e){return t=t.chartScore,e=e.chartScore,t===e?0:t>e?-1:1}),S=h.slice(0,30),l=h.slice(30),A=[],b={labels:[],chartScore:0,label:"",appearances:[],albums:[]},_.each(l,function(t){return b.labels.push(t.label),b.albums.push(t.albums),_.each(t.appearances,function(t){return b.appearances.push(t)})}),_.each(S,function(t){return A.push(t)}),b.label=""+b.labels.length+" Others",b.albums=_.flatten(b.albums),_.each(b.appearances,function(t){return b.chartScore+=31-t.position}),A.push(b),v=function(t){return d3.selectAll("g.arc").transition().duration(100).style("opacity",.2),d3.select("g ."+i(t.data.label)).transition().duration(100).style("opacity",1),x(this,t)},y=function(){return d3.selectAll("g.arc").transition().duration(100).style("opacity",1),$(".tip").fadeOut(50).remove()},c=function(t){var e;return e=t.attributes.artist,r.trigger("click:album:circle",e)},x=function(t,e){var n,r;return r=d3.mouse(t),$("#labels").append("<div class='tip'></div>"),n=d3.select(".tip"),n.style("right","1.25rem").style("top","50px").style("background",u(e.data.label)),$(".tip").html(""+e.data.label+"<br />\n# of Albums: "+e.data.albums.length+"<br />\n# of Appearances: "+e.data.appearances.length+"<br />\nChartscore: "+e.data.chartScore),$(".tip").fadeIn(100)},C=function(){return $(t).append("<div class='tip text-center'></div>").find(".tip").css("width",I+g.left+g.right+"px").css("margin","auto").css("top",d/2+"px").html("<br />\nSorry, No Data is available for the selected Time Range.\n<br />\n<br />").fadeIn(100)},p=k.selectAll(".arc").data(f(A)).enter().append("g").attr("class",function(t){return"arc "+i(t.data.label)}),p.append("path").attr("d",s).style("fill",function(t){return u(t.data.label)}),p.on("mouseover",v).on("mouseout",y),0===a.length?C():void 0}}),require.register("modules/landing/showLanding/landingGraph",function(t,e,n){var r,i;r=e("application"),i=function(t){var e,n,r;return r=function(){switch(!1){case!t:return moment(t);default:return moment()}}(),e=r.get("day"),n=function(){switch(!1){case 0!==e:return r.day(-5);case 1!==e:return r.day(-5);case 2!==e:return r;case!(e>2):return r.day(2)}}(),n=moment(n),n.format("YYYY-MM-DD")},n.exports=function(t,n,r){var i,o,a,s,l,c,u,p,d,h,f,m,g,y,v,b,w,_,x;return u={top:100,right:120,bottom:50,left:50},v=$("#graph-region").width()-u.left-u.right,l=500-u.top-u.bottom,_=d3.scale.linear().range([0,l]),b=d3.scale.linear().range([0,v-100]),s=e("colorList"),w=d3.svg.axis().scale(b).orient("bottom"),x=d3.svg.axis().scale(_).orient("left"),y=d3.select(t).append("svg").attr("width",v+u.left+u.right).attr("height",l+u.top+u.bottom).append("g").attr("transform","translate("+(u.left+20)+","+u.top+")"),o=n.models,o=o.slice(0,30),h=d3.scale.linear(),h.domain(d3.extent(o,function(t){return t.attributes.frontPoints})),h.range([5,130]),_.domain([d3.max(o,function(t){return t.attributes.appearances.length}),d3.min(o,function(t){return t.attributes.appearances.length})]),b.domain(d3.extent(o,function(t){return t.attributes.frontPoints})),y.append("g").attr("class","x axis").attr("transform","translate(0,"+l+")").call(w),0!==o.length&&y.append("g").attr("class","y axis").attr("transform","translate(-10,0)").call(x).append("text").attr("transform","rotate(-90)").attr("y",6).attr("dy",".71em").style("text-anchor","end").text("# of Appearances"),d=function(t){return d3.selectAll("g circle").transition().duration(100).style("opacity",.2),d3.select("g ."+t.attributes.slug).transition().duration(100).style("opacity",1),f(this,t)},p=function(){return d3.selectAll("g circle").transition().duration(100).style("opacity",1),$(".tip").fadeOut(50).remove()},a=function(t){var e;return e=t.attributes.artist,r.trigger("click:album:circle",e)},f=function(t,e){var n,r;return r=d3.mouse(t),$("#graph").append("<div class='tip'></div>"),n=d3.select(".tip"),n.style("left","150px").style("top","50px").style("background",s(e.attributes.rank)),$(".tip").html("#"+e.attributes.rank+": "+e.attributes.artist+" <br />\n"+e.attributes.album+"<br />\nTotal Appearances: "+e.attributes.appearances.length+"<br />\nChartscore: "+e.attributes.frontPoints+"<br />\nFirst Appearance: "+e.attributes.firstWeek+"<br />\nAppeared on "+e.attributes.stations.length+" / "+e.attributes.totalStations+" stations"),$(".tip").fadeIn(100)},m=function(){return $(t).append("<div class='tip text-center'></div>").find(".tip").css("width",v+u.left+u.right+"px").css("margin","auto").css("top",l/2+"px").html("<br />\nSorry, No Data is available for the selected Time Range.\n<br />\n<br />").fadeIn(100)},g=function(){return 0!==$(t).find(".tip").length?$(".info").remove():$(t).append("<div class='tip text-center info'></div>").find(".tip").css("width",v+u.left+u.right+"px").css("margin","auto").css("top",l/3+"px").html("<br />\nThis graph displays the top albums for all stations over the selected time range.<br />\nThe X-Axis and the Radius of each circle is determined by the album's Chartscore.<br />\nThe Y-Axis is determined by the album's total number of appearances.<br />\n<br />\nMouseover any circle for more information.<br />\n<br />\n(Click anywhere to hide)\n<br />\n<br />").on("click",c).fadeIn(100)},c=function(){return $(t).find(".info").fadeOut(100),$(".info").remove()},$(t).prepend("<div class='button tiny radius infobox'></div>").find(".infobox").html("<i class='fi-info large'></i>").on("click",g),$(t).find("svg").on("click",c),i=y.selectAll("circle").data(o).enter().append("circle").attr("fill",function(t){return s(t.attributes.rank)}).attr("class",function(t){return"dot "+t.attributes.slug}).attr("cy",function(t){var e;return e=t.attributes.appearances.length,_(e)}).attr("cx",function(t){return b(t.attributes.frontPoints)}).attr("r",function(t){return h(t.attributes.frontPoints)}),i.on("mouseover",d).on("mouseout",p).on("click",a),0===o.length?m():void 0}}),require.register("modules/landing/showLanding/newAlbumsGraph",function(t,e,n){var r,i,o;r=e("application"),i=function(t){var e;return e=function(t){return!isNaN(parseFloat(t))&&isFinite(t)},e(t.charAt(0))&&(t="_"+t),t.toLowerCase().replace(RegExp(" ","g"),"-").replace(/[^\w-]+/g,"")},o=function(t){var e,n,r;return r=function(){switch(!1){case!t:return moment(t);default:return moment()}}(),e=r.get("day"),n=function(){switch(!1){case 0!==e:return r.day(-5);case 1!==e:return r.day(-5);case 2!==e:return r;case!(e>2):return r.day(2)}}(),n=moment(n),n.format("YYYY-MM-DD")},n.exports=function(t,n,r){var i,o,a,s,l,c,u,p,d,h,f,m,g,y,v,b,w;return u={top:50,right:50,bottom:50,left:50,gutter:30},w=($("#circles-region").width()-u.left-u.right)/3-4*u.gutter,c=500-u.top-u.bottom,g=Math.min(w,c)/2,s=e("colorList"),o=d3.svg.arc().outerRadius(g-10).innerRadius(0),m=d3.layout.pie().value(function(t){return t.length}),h=d3.layout.pie().value(function(t){return t.length}),b=d3.select(t).select("#newAlbums").append("svg").attr("width",w+u.left+u.right).attr("height",c).append("g").attr("transform","translate("+(w/2+1.75*u.gutter)+", "+c/2+")"),i=n.models,f=[],f[0]=_.filter(i,function(t){return-1!==_.indexOf(n.potentialA,t.attributes.firstWeek)}),f[1]=_.filter(i,function(t){return-1===_.indexOf(n.potentialA,t.attributes.firstWeek)}),_.each(f,function(t){return t.sort(function(t,e){return t=t.get("frontPoints"),e=e.get("frontPoints"),t===e?0:t>e?-1:1})}),d=function(t,e){return d3.selectAll("g.arc").transition().duration(100).style("opacity",.2),d3.select("g ._"+e).transition().duration(100).style("opacity",1),y(this,t,e)},p=function(){return d3.selectAll("g.arc").transition().duration(100).style("opacity",1),$(".tip").fadeOut(50).remove()},a=function(){var t,e;return t=d3.select(this),t.classed("arc _0")?t.classed("selected")?(r.trigger("switch:all"),t.attr("class","arc _0")):(r.trigger("switch:debuts"),t.attr("class","arc _0 selected"),d3.select("g ._1").attr("class","arc _1")):(r.trigger("switch:all"),d3.select("g ._0").attr("class","arc _0")),e=["debuts","all"]},y=function(t,e,n){var r,o;return o=d3.mouse(t),$("#newAlbums").append("<div class='tip'></div>"),r=d3.select(".tip"),r.style("right","1.25rem").style("top","50px").style("background",s(n)),$(".tip").html(""+(0===n?"New This Week":"Previously Appeared")+"<br />\nAlbums: "+e.data.length+"<br />\n"+(+e.data.length/+i.length*100).toFixed(0)+"%<br />\n#1: "+e.data[0].get("artist")+" - "+e.data[0].get("album")),$(".tip").fadeIn(100)},v=function(){return $(t).append("<div class='tip text-center'></div>").find(".tip").css("width",w+u.left+u.right+"px").css("margin","auto").css("top",c/2+"px").html("<br />\nSorry, No Data is available for the selected Time Range.\n<br />\n<br />").fadeIn(100)},l=b.selectAll(".arc").data(m(f)).enter().append("g").attr("class",function(t,e){return"arc _"+e}),l.append("path").attr("d",o).style("fill",function(t,e){return s(e)}),l.on("mouseover",d).on("mouseout",p).on("click",a),0===i.length?v():void 0}}),require.register("modules/landing/showLanding/reportingGraph",function(t,e,n){var r,i,o;r=e("application"),i=function(t){var e;return e=function(t){return!isNaN(parseFloat(t))&&isFinite(t)},e(t.charAt(0))&&(t="_"+t),t.toLowerCase().replace(RegExp(" ","g"),"-").replace(/[^\w-]+/g,"")},o=function(t){var e,n,r;return r=function(){switch(!1){case!t:return moment(t);default:return moment()}}(),e=r.get("day"),n=function(){switch(!1){case 0!==e:return r.day(-5);case 1!==e:return r.day(-5);case 2!==e:return r;case!(e>2):return r.day(2)}}(),n=moment(n),n.format("YYYY-MM-DD")},n.exports=function(t,n,r){var i,o,a,s,l,c,u,p,d,h,f,m,g,y,v,b,w;return p={top:50,right:50,bottom:50,left:50},w=$("#circles-region").width()/3-p.left-p.right,u=500-p.top-p.bottom,m=Math.min(w,u)/2,s=e("colorList"),o=d3.svg.arc().outerRadius(m-10).innerRadius(m-30),f=d3.layout.pie().value(function(t){return t}),b=d3.select(t).select("#reporting").append("svg").attr("width",w+p.left+p.right).attr("height",u).append("g").attr("transform","translate("+(w/2+30)+", "+u/2+")"),i=n.models,v=n.stations,l=[v.length,49-v.length],h=function(t,e){return d3.selectAll("g.arc").transition().duration(100).style("opacity",.2),d3.select("g ._"+t.data).transition().duration(100).style("opacity",1),g(this,t,e)},d=function(){return d3.selectAll("g.arc").transition().duration(100).style("opacity",1),$(".tip").fadeOut(50).remove()},a=function(t){var e;return e=t.attributes.artist,r.trigger("click:album:circle",e)},g=function(t,e,n){var r,i;return i=d3.mouse(t),$("#reporting").append("<div class='tip'></div>"),r=d3.select(".tip"),r.style("right","1.25rem").style("top","50px").style("background",s(n)),$(".tip").html(""+(0===n?"Reporting Stations":"Not Reporting")+"<br />\nStations: "+e.data+"<br />\n"+(+e.data/49*100).toFixed(0)+"%\n"),$(".tip").fadeIn(100)},y=function(){return $(t).append("<div class='tip text-center'></div>").find(".tip").css("width",w+p.left+p.right+"px").css("margin","auto").css("top",u/2+"px").html("<br />\nSorry, No Data is available for the selected Time Range.\n<br />\n<br />").fadeIn(100)},c=b.selectAll(".arc").data(f(l)).enter().append("g").attr("class",function(t){return"arc _"+t.data}),c.append("path").attr("d",o).style("fill",function(t,e){return s(e)}),c.on("mouseover",h).on("mouseout",d),0===i.length?y():void 0}}),require.register("modules/landing/showLanding/showLanding_controller",function(t,e,n){var r,i,o={}.hasOwnProperty,a=function(t,e){function n(){this.constructor=t}for(var r in e)o.call(e,r)&&(t[r]=e[r]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},s=function(t,e){return function(){return t.apply(e,arguments)}};r=e("application"),i=e("controllers/baseController"),n.exports=r.module("LandingApp.Show",function(t,n,r,i,o,l){var c,u,p,d,h,f,m,g,y,v;return t.Controller=function(e){function i(){return c=i.__super__.constructor.apply(this,arguments)}return a(i,e),i.prototype.initialize=function(){var t,e=this;return this.layout=this.getLayoutView(),t=n.request("stations:entities"),this.startDate="",this.endDate="",this.request="",this.number=30,this.listenTo(this.layout,"show",function(){return e.showChart(),e.showList(t)}),this.listenTo(this.layout,"change:time",function(t){var n;return n={},n.request=t,e.request=t,e.showChart(n)}),this.listenTo(this.layout,"change:number",function(t){return e.number=t,topCharts.trigger("filter"),e.showChart(t)}),this.show(this.layout,{loading:!0}),o(document).foundation()},i.prototype.showChart=function(t){var e,r,i,a,s=this;return null==t&&(t={}),i=moment(),2===i.day()&&(i.day(-5),t.endDate||(t.endDate=i)),t.startDate||(t.startDate=i),a=n.request("topx:entities",t),r=a.clone(),e=this.getChartView(r),this.showGraph(a),this.showInfo(a),t.request?this.show(e,{region:this.layout.tableRegion,loading:{loadingType:"opacity"}}):this.show(e,{region:this.layout.tableRegion,loading:!0}),n.execute("when:fetched",a,function(){return a.initializeFilters(),a.sort(),r.initializeFilters(),r.set(a.first(s.number)),o(document).foundation()}),a.on("filter",function(){return r.reset(a.first(this.number))})},i.prototype.showInfo=function(t){var e,n=this;return e=this.getInfoView(t),this.listenTo(e,"change:range",function(t){var e,r;return e={},e.request=1,n.request="",e.number=n.number,e.startDate=moment(t.date1),n.startDate=e.startDate,e.endDate=moment(t.date2),n.endDate=e.endDate,console.log(e),r=""+e.startDate.format("YYYY-MM-DD")+" - "+e.endDate.format("YYYY-MM-DD"),ga("send","event","change:date",r),n.showChart(e)}),this.listenTo(e,"click:week",function(t){var e,r,i,o;switch(e=moment(t.week),r=moment(),t.dir){case"next":i=e.day(9),i>r&&(i=r);break;case"prev":i=e.day(-5);break;default:i=e}return o={startDate:i.format("YYYY-MM-DD"),endDate:i.format("YYYY-MM-DD")},n.showChart(o)}),this.show(e,{region:this.layout.infoRegion,loading:!0})},i.prototype.showSearch=function(t){var e;return e=this.getSearchView(t),this.listenTo(e,"click:search",function(t){switch(t.kind){case"artist":return n.navigate("/artist/"+t.keyword,{trigger:!0});case"station":return n.navigate("/station/"+t.keyword,{trigger:!0})}}),this.show(e,{region:this.layout.searchRegion,loading:!0}),o(document).foundation()},i.prototype.showGraph=function(t){var e,r;return r=this.getGraphView(t),e=this.getCirclesView(t),this.listenTo(r,"click:album:circle",function(t){return n.navigate("/artist/"+encodeURIComponent(t),{trigger:!0})}),this.listenTo(e,"switch:debuts",function(){var e;return t.resetFilters(),e=[],t.potentialA.length>1?(l.each(t.potentialA,function(t){return e.push({firstWeek:t})}),t.addFilters(e)):t.addFilter({firstWeek:t.potentialA[0]})}),this.listenTo(e,"switch:all",function(){return t.resetFilters()}),this.show(r,{region:this.layout.graphRegion,loading:!0}),this.show(e,{region:this.layout.circlesRegion,loading:!0})},i.prototype.showList=function(t){var e;return e=this.getListView(t),this.show(e,{region:this.layout.listRegion,loading:!0})},i.prototype.getSearchView=function(e){return new t.Search({collection:e})},i.prototype.getLayoutView=function(){return new t.Layout},i.prototype.getGraphView=function(e){return new t.Graph({collection:e})},i.prototype.getCirclesView=function(e){return new t.Circles({collection:e})},i.prototype.getListView=function(e){return new t.StationList({collection:e})},i.prototype.getInfoView=function(e){return new t.Info({model:new r.Model(e)})},i.prototype.getChartView=function(e){return new t.Chart({collection:e})},i}(n.Controllers.Base),t.Layout=function(t){function e(){return u=e.__super__.constructor.apply(this,arguments)}return a(e,t),e.prototype.template="modules/landing/showLanding/templates/show_layout",e.prototype.id="landing-page",e.prototype.ui={timeSelect:"#time-select",range:"input#custom-range",icon:"i#custom-range",number:"#number"},e.prototype.events={"change @ui.timeSelect":"select","change @ui.number":"changeNumber"},e.prototype.changeNumber=function(){return this.trigger("change:number",this.ui.number.val())},e.prototype.select=function(){return this.trigger("change:time",this.ui.timeSelect.val())},e.prototype.regions={titleRegion:"#title_region",blurbRegion:"#blurb_region",infoRegion:"#info-region",graphRegion:"#graph-region",circlesRegion:"#circles-region",tableRegion:"#table_region",listRegion:"#list_region"},e}(i.Layout),t.Info=function(t){function e(){return p=e.__super__.constructor.apply(this,arguments)}return a(e,t),e.prototype.template="modules/landing/showLanding/templates/info",e.prototype.ui={timeSelect:"#time-select",range:"input#custom-range",icon:"i#custom-range",number:"#number",text:"#text"},e.prototype.events={"click .next":"clickNext"},e.prototype.clickNext=function(t){var e;return t.preventDefault(),e={week:o(t.target).data("week"),dir:t.target.id},this.trigger("click:week",e)},e.prototype.onRender=function(){var t=this;return this.ui.text.on("click",function(e){return e.stopPropagation(),t.ui.icon.click()}),this.ui.icon.dateRangePicker({startDate:"2014-01-01",endDate:moment(),batchMode:!1,shortcuts:{prev:["week","month","year"],"prev-days":[7,14],"next-days":!1,next:!1}}).bind("datepicker-change",function(e,n){return t.trigger("change:range",n)})},e}(i.ItemView),t.Search=function(t){function e(){return d=e.__super__.constructor.apply(this,arguments)}return a(e,t),e.prototype.template="modules/landing/showLanding/templates/search",e.prototype.ui={searchInput:"#search_input",kind:"#kind_input"},e.prototype.events={submit:"submit"},e.prototype.submit=function(t){var e;return t.preventDefault(),e={},e.keyword=o.trim(this.ui.searchInput.val()),e.kind=o.trim(this.ui.kind.val()),this.trigger("click:search",e)},e}(i.ItemView),t.Graph=function(t){function n(){return h=n.__super__.constructor.apply(this,arguments)}return a(n,t),n.prototype.template="modules/landing/showLanding/templates/graph",n.prototype.buildGraph=e("modules/landing/showLanding/landingGraph"),n.prototype.graph=function(){return this.buildGraph(this.el,this.collection,this)},n.prototype.id="graph",n.prototype.initialize=function(){return this.collection.on("filter",this.render)},n.prototype.onRender=function(){return matchMedia(Foundation.media_queries.medium).matches?this.graph():void 0},n}(i.ItemView),t.Circles=function(t){function n(){return f=n.__super__.constructor.apply(this,arguments)}return a(n,t),n.prototype.template="modules/landing/showLanding/templates/circles",n.prototype.newAlbums=e("modules/landing/showLanding/newAlbumsGraph"),n.prototype.labelsGraph=e("modules/landing/showLanding/labelsGraph"),n.prototype.reportingGraph=e("modules/landing/showLanding/reportingGraph"),n.prototype.className="text-center",n.prototype.id="circles",n.prototype.labels=function(){return this.$el.find("#labels").find("svg").remove(),this.labelsGraph(this.el,this.collection,this)
},n.prototype.initialize=function(){var t=this;return this.collection.on("filter",function(){return t.labels()})},n.prototype.graph=function(){return this.newAlbums(this.el,this.collection,this),this.labelsGraph(this.el,this.collection,this),this.reportingGraph(this.el,this.collection,this)},n.prototype.onRender=function(){return matchMedia(Foundation.media_queries.medium).matches?this.graph():void 0},n}(i.ItemView),t.StationList=function(t){function e(){return m=e.__super__.constructor.apply(this,arguments)}return a(e,t),e.prototype.template="modules/landing/showLanding/templates/stationList",e.prototype.className=" small-12 columns",e.prototype.events={"click a":"clickStation"},e.prototype.clickStation=function(t){return t.preventDefault(),o(t.target).hasClass("button")?n.navigate("station/",{trigger:!0}):n.navigate("station/"+t.target.text,{trigger:!0})},e}(i.ItemView),t.ChartItem=function(t){function e(){return g=e.__super__.constructor.apply(this,arguments)}return a(e,t),e.prototype.template="modules/landing/showLanding/templates/chartItem",e.prototype.tagName="tr",e.prototype.initialize=function(){return this.model=this.model.set({index:this.options.index})},e.prototype.events={"click a":"clickItem"},e.prototype.clickItem=function(t){var e;return t.preventDefault(),e=encodeURIComponent(t.target.text),n.navigate("artist/"+e,{trigger:!0})},e}(i.ItemView),t.Empty=function(t){function e(){return y=e.__super__.constructor.apply(this,arguments)}return a(e,t),e.prototype.template="modules/landing/showLanding/templates/empty",e.prototype.tagName="tr",e}(i.ItemView),t.Chart=function(e){function n(){return this.clickHeader=s(this.clickHeader,this),v=n.__super__.constructor.apply(this,arguments)}return a(n,e),n.prototype.template="modules/landing/showLanding/templates/chart",n.prototype.itemView=t.ChartItem,n.prototype.emptyView=t.Empty,n.prototype.className="small-12 columns",n.prototype.itemViewContainer="#thecharts",n.prototype.itemViewOptions=function(t){return{index:this.collection.indexOf(t)+1}},n.prototype.initialize=function(){},n.prototype.events={"click th":"clickHeader"},n.prototype.sortUpIcon="fi-arrow-down",n.prototype.sortDnIcon="fi-arrow-up",n.prototype.onRender=function(){return this.$("th").append(o("<i>")).closest("th").find("i").addClass("fi-minus-circle size-18"),this.$("[column='"+this.collection.sortAttr+"']").find("i").removeClass("fi-minus-circle").addClass(this.sortUpIcon),this},n.prototype.clickHeader=function(t){var e,n,r;e=o(t.currentTarget),r=e.attr("column"),n=this.collection.sortAttr,r===n?this.collection.sortDir*=-1:this.collection.sortDir=1,o("th").find("i").attr("class","fi-minus-circle size-18"),e.find("i").removeClass("fi-minus-circle").addClass(1===this.collection.sortDir?this.sortUpIcon:this.sortDnIcon),this.collection.sortCharts(r)},n}(i.CompositeView)})}),require.register("modules/landing/showLanding/templates/chart",function(t,e,n){var r=Handlebars.template(function(t,e,n,r,i){return this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,t.helpers),i=i||{},'<div class="chart">\n  <table width="100%" class="">\n    <thead>\n      <th column=\'rank\'>Rank </th>\n      <th column="artist">Artist </th>\n      <th column="album">Album </th>\n      <th column="label">Label </th>\n  <!--     <th column="appearances">Appearances </th> -->\n    </thead>\n    <tbody id="thecharts">\n    </tbody>\n  </table>\n</div>\n'});"function"==typeof define&&define.amd?define([],function(){return r}):"object"==typeof n&&n&&n.exports&&(n.exports=r)}),require.register("modules/landing/showLanding/templates/chartItem",function(t,e,n){var r=Handlebars.template(function(t,e,n,r,i){this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,t.helpers),i=i||{};var o,a,s="",l="function",c=this.escapeExpression;return s+="<td>",(a=n.rank)?o=a.call(e,{hash:{},data:i}):(a=e&&e.rank,o=typeof a===l?a.call(e,{hash:{},data:i}):a),s+=c(o)+'</td>\n<td><a href="#">'+c((o=e&&e._id,o=null==o||o===!1?o:o.artist,typeof o===l?o.apply(e):o))+"</a></td>\n<td>"+c((o=e&&e._id,o=null==o||o===!1?o:o.album,typeof o===l?o.apply(e):o))+"</td>\n<td>"+c((o=e&&e._id,o=null==o||o===!1?o:o.label,typeof o===l?o.apply(e):o))+"</td>\n<!-- <td>"+c((o=e&&e.appearances,o=null==o||o===!1?o:o.length,typeof o===l?o.apply(e):o))+"</td> -->\n"});"function"==typeof define&&define.amd?define([],function(){return r}):"object"==typeof n&&n&&n.exports&&(n.exports=r)}),require.register("modules/landing/showLanding/templates/circles",function(t,e,n){var r=Handlebars.template(function(t,e,n,r,i){return this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,t.helpers),i=i||{},'<div class="medium-4 columns" id="labels">\n  <h1>Labels</h1>\n</div>\n<div class="medium-4 columns" id="newAlbums">\n  <h1>Debuts</h1>\n</div>\n<div class="medium-4 columns" id="reporting">\n  <h1>Reporting Stations</h1>\n</div>\n'});"function"==typeof define&&define.amd?define([],function(){return r}):"object"==typeof n&&n&&n.exports&&(n.exports=r)}),require.register("modules/landing/showLanding/templates/empty",function(t,e,n){var r=Handlebars.template(function(t,e,n,r,i){return this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,t.helpers),i=i||{},"<td colspan='100%' class=\"text-center\"><strong>Sorry, Nothing Found.</strong></th>\n"});"function"==typeof define&&define.amd?define([],function(){return r}):"object"==typeof n&&n&&n.exports&&(n.exports=r)}),require.register("modules/landing/showLanding/templates/graph",function(t,e,n){var r=Handlebars.template(function(t,e,n,r,i){return this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,t.helpers),i=i||{},'<div class="show-for-small-only">\n  <p class="lead">For now, ChartZapp\'s graphs are only available on larger screens.</p>\n  <p>If you\'d like to see more on a mobile device,\n  <a href="#" data-reveal-id="feedback">let me know!</a></p>\n\n</div>\n'});"function"==typeof define&&define.amd?define([],function(){return r}):"object"==typeof n&&n&&n.exports&&(n.exports=r)}),require.register("modules/landing/showLanding/templates/info",function(t,e,n){var r=Handlebars.template(function(t,e,n,r,i){function o(t,e){var r,i,o="";return o+='\n  <div class="large-4 columns">\n    <ul class="inline-list right">\n      <li><a class="next" data-week="',(i=n.week)?r=i.call(t,{hash:{},data:e}):(i=t&&t.week,r=typeof i===c?i.call(t,{hash:{},data:e}):i),o+=u(r)+'" id="prev"><i class="fi-arrow-left"></i> Prev</a></li>\n      <li><a class="next" data-week="',(i=n.week)?r=i.call(t,{hash:{},data:e}):(i=t&&t.week,r=typeof i===c?i.call(t,{hash:{},data:e}):i),o+=u(r)+'" id="next">Next <i class="fi-arrow-right"></i></a></li>\n    </ul>\n  </div>\n  '}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,t.helpers),i=i||{};var a,s,l="",c="function",u=this.escapeExpression,p=this;return l+='\n<div class="row">\n  <div class="large-8 columns">\n    <h1 id="text"><i id="custom-range" class="fi-calendar fi-large"></i> ',(s=n.desc)?a=s.call(e,{hash:{},data:i}):(s=e&&e.desc,a=typeof s===c?s.call(e,{hash:{},data:i}):s),l+=u(a)+"</h1>\n  </div>\n  ",a=n["if"].call(e,e&&e.week,{hash:{},inverse:p.noop,fn:p.program(1,o,i),data:i}),(a||0===a)&&(l+=a),l+='\n  <!-- <div class="large-4 columns">\n    <div class="row collapse">\n      <div class="small-10 columns">\n        <input id="custom-range" type="text" placeholder="This Week"></input>\n      </div>\n      <div class="small-2 columns">\n        <span class="postfix radius"><i id="custom-range" class="fi-calendar"></i></span>\n      </div>\n    </div>\n  </div> -->\n<!-- </div> -->\n</div>\n'});"function"==typeof define&&define.amd?define([],function(){return r}):"object"==typeof n&&n&&n.exports&&(n.exports=r)}),require.register("modules/landing/showLanding/templates/search",function(t,e,n){var r=Handlebars.template(function(t,e,n,r,i){function o(t){var e,n="";return n+='\n          <option value="'+c((e=t&&t.name,typeof e===l?e.apply(t):e))+'">'+c((e=t&&t.name,typeof e===l?e.apply(t):e))+"</option>\n        "}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,t.helpers),i=i||{};var a,s="",l="function",c=this.escapeExpression,u=this;return s+='<!-- <div class="row"> -->\n<div class="panel radius">\n  <h3>Search</h3>\n  <p>What are you waiting for? Search Away!</p>\n  <form id="searchForm" data-abide>\n<!--     <div class="station-select">\n      <select form="#searchForm" width="100%" data-placeholder="Choose a Station..." class="chosen-select" id="search_input">\n        <option value=""></option>\n        ',a=n.each.call(e,e&&e.items,{hash:{},inverse:u.noop,fn:u.program(1,o,i),data:i}),(a||0===a)&&(s+=a),s+='\n      </select>\n    </div> -->\n    <p>I\'m looking for...</p>\n    <div class="row">\n      <div class="small-6 columns">\n        <input type="text" id="search_input"></input>\n      </div>\n      <div class="small-6 columns">\n        <select form="#searchForm" id="kind_input">\n          <option value="artist">an Artist</option>\n          <option value="station">a Station</option>\n        </select>\n      </div>\n    </div>\n      <button type="submit">Search</button>\n  </form>\n</div>\n<!-- </div> -->\n'});"function"==typeof define&&define.amd?define([],function(){return r}):"object"==typeof n&&n&&n.exports&&(n.exports=r)}),require.register("modules/landing/showLanding/templates/show_layout",function(t,e,n){var r=Handlebars.template(function(t,e,n,r,i){return this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,t.helpers),i=i||{},'<div class=\'title-row\' data-equalizer>\n  <div class="row" >\n    <div id="title_region" class="small-9 large-10 columns" data-equalizer-watch>\n    <!-- <div class="panel"> -->\n      <h1 class="main-title">ChartZapp!</h1>\n    </div>\n    <div class="small-3 medium-1 large-1 end columns" id="logos" data-equalizer-watch>\n      <div class="row">\n        <!-- <div class="small-6 columns"><img src="img/earshot-logo.png"></div>\n        <div class="small-6 columns"><img src="img/ncra-logo.png"></div> -->\n\n        <a href="http://www.ncra.ca" target="blank"><img src="img/ncra-logo.png"></a>\n        <a href="http://www.earshot-online.com" target="blank"><img src="img/earshot-logo.png"></a>\n      </div>\n    </div>\n  </div>\n</div>\n<div class=\'panel-row\'>\n  <div class="row">\n  <div id="blurb_region" class="small-12 columns">\n    <p class="lead">This is ChartZapp, a new way of analyzing Canadian\n      Campus-Community Radio Charts.</p>\n    <p>It\'s currently in Beta, and for now\n      the database only extends to the beginning of 2014.</p>\n      <p>If you have questions, suggestions, or find a bug, please\n      <a href="#" data-reveal-id="feedback">let me know!</a>\n      </p>\n    </p>\n  </div>\n</div>\n</div>\n<div class="panel-row">\n  <div id="info-region" class="small-12 columns">\n    <!-- <div class="panel"> -->\n\n  </div>\n</div>\n<div class="graph-row">\n  <div id="graph-region" class="small-12 columns"></div>\n</div>\n<div class="panel-row">\n  <div id="circles-region" class="small-12 columns"></div>\n</div>\n\n<div class="graph-row">\n  <div id="table_region" class="row"></div>\n</div>\n<div class="panel-row">\n  <div id="list_region" class="row"></div>\n</div>\n'});"function"==typeof define&&define.amd?define([],function(){return r}):"object"==typeof n&&n&&n.exports&&(n.exports=r)}),require.register("modules/landing/showLanding/templates/stationList",function(t,e,n){var r=Handlebars.template(function(t,e,n,r,i){function o(t){var e,n="";return n+='\n  <li><a href="#">'+c((e=t&&t.name,typeof e===l?e.apply(t):e))+"</a></li>\n  "}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,t.helpers),i=i||{};var a,s="",l="function",c=this.escapeExpression,u=this;return s+='<ul class="inline-list text-justify">\n  ',a=n.each.call(e,e&&e.items,{hash:{},inverse:u.noop,fn:u.program(1,o,i),data:i}),(a||0===a)&&(s+=a),s+='\n</ul>\n<div class="text-center">\n  <a href="#" class="button">See All Stations</a>\n</div>\n'});"function"==typeof define&&define.amd?define([],function(){return r}):"object"==typeof n&&n&&n.exports&&(n.exports=r)}),require.register("modules/station/showStation/showStation_controller",function(t,e,n){var r,i,o,a,s=function(t,e){return function(){return t.apply(e,arguments)}},l={}.hasOwnProperty,c=function(t,e){function n(){this.constructor=t}for(var r in e)l.call(e,r)&&(t[r]=e[r]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t};r=e("application"),o=e("modules/station/station_app"),i=e("controllers/baseController"),a=e("colorList"),n.exports=r.module("StationApp.Show",function(t,n,r,i,o,l){var u,p,d,h,f,m,g,y,v,b,w,_,x;return t.Controller=function(e){function r(){return this.showRecent=s(this.showRecent,this),this.mainView=s(this.mainView,this),u=r.__super__.constructor.apply(this,arguments)}return c(r,e),r.prototype.initialize=function(t){var e,r=this;return this.opts=t,this.opts.loadingType="spinner",this.layout=this.getLayoutView(),this.initStation=n.request("topx:entities",t),e=n.request("topx:entities",t),this.stations=n.request("stations:entities"),n.execute("when:fetched",this.stations,function(){return r.stations.initializeFilters()}),this.listenTo(this.layout,"show",function(){return r.mainView(e)}),this.show(this.layout,{loading:!0})},r.prototype.mainView=function(t){return null==t&&(t=null),t.station?this.showStation(t):this.showStart(this.stations)},r.prototype.showRecent=function(t){var e,r,i;return i=t,t={},t.station=i,e=new Date,t.startDate=e.yyyymmdd(),t.endDate=t.startDate,r=n.request("topx:entities",t),this.showStation(r)},r.prototype.showStation=function(t){var e,r=this;return e=this.getStationView(t),this.showPanel(),this.showGraph(t),this.showTitle(t),n.execute("when:fetched",t,function(){return 0===t.length?r.showTitle(r.initStation):void 0}),this.show(e,{region:this.layout.tableRegion,loading:{loadingType:this.opts.loadingType}}),this.listenTo(e,"click:week",function(t){var e,i,o,a,s;switch(r.opts.loadingType="opacity",e=moment(t.week),o=moment(),t.dir){case"next":a=e.day(9),a>o&&(a=o);break;case"prev":a=e.day(-5);break;default:a=e}return s={station:r.opts.station,startDate:a.format("YYYY-MM-DD"),endDate:a.format("YYYY-MM-DD")},i=n.request("topx:entities",s),r.showStation(i)})},r.prototype.showTitle=function(t){var e;return e=this.getTitleView(t),this.show(e,{region:this.layout.titleRegion,loading:{loadingType:this.opts.loadingType}})},r.prototype.showGraph=function(t){var e;return e=this.getGraphView(t),this.listenTo(e,"click:album:circle",function(t){return n.navigate("/artist/"+encodeURIComponent(t),{trigger:!0})}),this.show(e,{region:this.layout.graphRegion,loading:{loadingType:this.opts.loadingType}})},r.prototype.showPanel=function(){var t,e=this;return t=this.getPanelView(),this.show(t,{region:this.layout.panelRegion}),this.listenTo(t,"click:mostRecent",function(){return e.opts.loadingType="opacity",e.showRecent(e.opts.station)}),this.listenTo(t,"click:thisYear",function(t){var r;return null==t&&(t={}),e.opts.loadingType="opacity",t.station=e.opts.station,t.startDate=moment().subtract(1,"years"),t.endDate=moment,r=n.request("topx:entities",t),e.showStation(r)}),this.listenTo(t,"click:other",function(t){var r;return e.opts.loadingType="opacity",t.station=e.opts.station,r=n.request("topx:entities",t),e.showStation(r)})},r.prototype.showEmpty=function(t){var e;return e=this.getEmptyView(t),this.show(e,{region:this.layout.tableRegion}),o(".chosen-select").chosen(),this.listenTo(e,"pick:station",function(t){return n.navigate("station/"+t.station,{trigger:!0})})},r.prototype.showStart=function(t){var e,r,i,a;return i=this.getStartTitle(t),r=this.getStartPanel(t),e=this.getGraphView(t),this.show(e,{region:this.layout.graphRegion,loading:!0}),this.show(i,{region:this.layout.titleRegion,loading:!0}),this.show(r,{region:this.layout.panelRegion,loading:!0}),a=this.getStartView(t),this.show(a,{region:this.layout.tableRegion,loading:!0}),o(".chosen-select").chosen(),this.listenTo(a,"pick:station",function(t){return n.navigate("station/"+t.station,{trigger:!0})}),this.listenTo(a,"itemview:pick:station",function(t,e){return n.navigate("station/"+e,{trigger:!0})})},r.prototype.getTitleView=function(e){return new t.Title({collection:e})},r.prototype.getEmptyView=function(e){return new t.EmptyView({collection:e})},r.prototype.getStartView=function(e){return new t.StartView({collection:e})},r.prototype.getStationView=function(e){return new t.Chart({collection:e,model:new n.Entities.Station(e)})},r.prototype.getPanelView=function(){return new t.Panel},r.prototype.getStartPanel=function(e){return new t.StartPanel({collection:e})},r.prototype.getStartTitle=function(e){return new t.StartTitle({collection:e})},r.prototype.getGraphView=function(e){return new t.Graph({collection:e})},r.prototype.getLayoutView=function(){return new t.Layout},r}(n.Controllers.Base),t.Layout=function(t){function e(){return p=e.__super__.constructor.apply(this,arguments)}return c(e,t),e.prototype.template="modules/station/showStation/templates/show_layout",e.prototype.regions={titleRegion:"#title-region",graphRegion:"#graph-region",panelRegion:"#panel-region",topRegion:"#topthree-region",tableRegion:"#table-region"},e}(i.Layout),t.Panel=function(t){function e(){return m=e.__super__.constructor.apply(this,arguments)}return c(e,t),e.prototype.template="modules/station/showStation/templates/panel",e.prototype.ui={mostRecent:"#mostRecent",thisYear:"#thisYear",startDate:"#startDate",endDate:"#endDate",range:"#dateRange"},e.prototype.events={"click @ui.mostRecent":"mostRecent","click @ui.thisYear":"thisYear"},e.prototype.onRender=function(){var t=this;return this.ui.range.dateRangePicker({startDate:"2014-01-01",endDate:moment(),shortcuts:{prev:["week","month","year"],"prev-days":[7,14],"next-days":!1,next:!1}}).bind("datepicker-change",function(e,n){var r;return r={},r.startDate=n.date1,r.endDate=n.date2,t.trigger("click:other",r)})},e.prototype.mostRecent=function(t){return t.preventDefault(),this.trigger("click:mostRecent")},e.prototype.thisYear=function(t){return t.preventDefault(),this.trigger("click:thisYear")},e}(i.ItemView),t.Title=function(t){function e(){return g=e.__super__.constructor.apply(this,arguments)}return c(e,t),e.prototype.template="modules/station/showStation/templates/title",e}(i.ItemView),t.Graph=function(t){function n(){return y=n.__super__.constructor.apply(this,arguments)}return c(n,t),n.prototype.template="modules/station/showStation/templates/graph",n.prototype.buildGraph=e("modules/station/showStation/stationGraph"),n.prototype.buildMap=e("modules/station/showStation/stationMap"),n.prototype.graph=function(){return d3.select("svg").remove(),this.buildGraph(this.el,this.collection,this)},n.prototype.mapGraph=function(){return this.buildMap(this.el,this.collection,this)},n.prototype.id="graph",n.prototype.initialize=function(){var t=this;return this.collection.on("filter",function(){return t.render()})},n.prototype.onRender=function(){return matchMedia(Foundation.media_queries.medium).matches?this.collection.station?this.graph():this.mapGraph():void 0},n}(i.ItemView),t.Empty=function(t){function e(){return v=e.__super__.constructor.apply(this,arguments)}return c(e,t),e.prototype.template="modules/station/showStation/templates/empty",e.prototype.tagName="tr",e}(i.ItemView),t.EmptyView=function(t){function e(){return b=e.__super__.constructor.apply(this,arguments)}return c(e,t),e.prototype.template="modules/station/showStation/templates/emptyview",e.prototype.className="small-12 columns",e.prototype.ui={stationPicker:"#station-select"},e.prototype.events={submit:"submit"},e.prototype.submit=function(t){var e;return t.preventDefault(),e={},e.station=o.trim(this.ui.stationPicker.val()),this.trigger("pick:station",e)},e}(i.ItemView),t.StartTitle=function(t){function e(){return w=e.__super__.constructor.apply(this,arguments)}return c(e,t),e.prototype.template="modules/station/showStation/templates/startTitle",e.prototype.onRender=function(){var t=this;return this.collection.on("filter",function(){return t.render()})},e}(i.ItemView),t.StartPanel=function(t){function e(){return _=e.__super__.constructor.apply(this,arguments)}return c(e,t),e.prototype.template="modules/station/showStation/templates/startPanel",e.prototype.onRender=function(){var t,e=this;return this.collection.on("filter",function(){return e.updateFilters(l.last(e.collection.filters))}),t=this.collection.getFilterLists(),l.each(t,function(t,n){return l.each(t,function(t){return e.$el.find("#"+n).append('<option value="'+t+'">'+t+"</option>")})}),this.$el.find(".chosen-select").chosen().trigger("chosen:updated")},e.prototype.events={"change .chosen-select":"submit","click #clearFilters":"clearFilters"},e.prototype.submit=function(t,e){var n,r,i;return t.preventDefault(),r={},n=t.target.id,i=e.selected?e.selected:e.deselected,r[n]=i,e.selected?this.addFilter(r):this.removeFilter(r)},e.prototype.addFilter=function(t){return this.collection.addFilter(t)},e.prototype.removeFilter=function(t){return this.collection.removeFilter(t)},e.prototype.updateFilters=function(t){var e,n,r=this;return t?(e=Object.keys(t),this.$el.find("option").attr("disabled",!0),this.$el.find("option[value='"+t[e]+"']").attr("selected",!0),n=this.collection.getUpdatedFilterLists(e),l.each(n,function(t){return l.each(t,function(t){return r.$el.find("option[value='"+t+"']").attr("disabled",!1)})}),this.$el.find(".chosen-select").chosen().trigger("chosen:updated")):void 0},e.prototype.clearFilters=function(t){return t.preventDefault(),this.collection.resetFilters(),this.$el.find("option").attr("disabled",!1),this.$el.find("option").attr("selected",!1),this.$el.find(".chosen-select").val("[]").trigger("chosen:updated")},e}(i.ItemView),t.SingleStation=function(t){function e(){return x=e.__super__.constructor.apply(this,arguments)}return c(e,t),e.prototype.template="modules/station/showStation/templates/singleStation",e.prototype.events={click:"nav",mouseover:"hover",mouseout:"mouseout"},e.prototype.mouseout=function(){return o(".panel").css("opacity",1)},e.prototype.hover=function(t){return o(".panel").css("opacity",.5),t.preventDefault(),o(t.target).closest(".panel").css("opacity",1)},e.prototype.nav=function(t){return t.preventDefault(),this.trigger("pick:station",this.model.get("name"))},e.prototype.onRender=function(){var t;return t=a(this.model.get("name")),this.$el.find(".panel").css("background",t)},e}(i.ItemView),t.StartView=function(e){function n(){return d=n.__super__.constructor.apply(this,arguments)}return c(n,e),n.prototype.itemView=t.SingleStation,n.prototype.template="modules/station/showStation/templates/start",n.prototype.itemViewContainer="#stations",n.prototype.ui={stationPicker:"#station-select"},n.prototype.events={submit:"submit"},n.prototype.submit=function(t){var e;return t.preventDefault(),e={},e.station=o.trim(this.ui.stationPicker.val()),this.trigger("pick:station",e)},n}(i.CompositeView),t.ChartItem=function(t){function e(){return h=e.__super__.constructor.apply(this,arguments)}return c(e,t),e.prototype.template="modules/station/showStation/templates/chartItem",e.prototype.tagName="tr",e.prototype.events={"click a":"clickArtist"},e.prototype.clickArtist=function(t){var e;return e=encodeURIComponent(t.target.text),n.navigate("artist/"+e,{trigger:!0})},e}(i.ItemView),t.Chart=function(e){function n(){return this.clickHeader=s(this.clickHeader,this),f=n.__super__.constructor.apply(this,arguments)}return c(n,e),n.prototype.template="modules/station/showStation/templates/chart",n.prototype.className="small-12 columns",n.prototype.itemView=t.ChartItem,n.prototype.emptyView=t.Empty,n.prototype.itemViewContainer="#thechart",n.prototype.events={"click th":"clickHeader","click .next":"clickNext"},n.prototype.clickNext=function(t){var e;return t.preventDefault(),e={week:o(t.target).data("week"),dir:t.target.id},this.trigger("click:week",e)},n.prototype.sortUpIcon="fi-arrow-down",n.prototype.sortDnIcon="fi-arrow-up",n.prototype.onRender=function(){return this.$("th").append(o("<i>")).closest("th").find("i").addClass("fi-minus-circle size-18"),this.$("[column='"+this.collection.sortAttr+"']").find("i").removeClass("fi-minus-circle").addClass(this.sortUpIcon),this},n.prototype.clickHeader=function(t){var e,n,r;e=o(t.currentTarget),r=e.attr("column"),n=this.collection.sortAttr,r===n?this.collection.sortDir*=-1:this.collection.sortDir=1,o("th").find("i").attr("class","fi-minus-circle size-18"),e.find("i").removeClass("fi-minus-circle").addClass(1===this.collection.sortDir?this.sortUpIcon:this.sortDnIcon),this.collection.sortCharts(r)},n}(i.CompositeView)})}),require.register("modules/station/showStation/stationGraph",function(t,e,n){var r;r=e("application"),n.exports=function(t,e,n){var r,i,o,a,s,l,c,u,p,d,h,f,m,g,y,v,b,w,_,x;return u={top:100,right:100,bottom:50,left:100},v=$("#graph-region").width()-u.left-u.right,l=500-u.top-u.bottom,_=d3.scale.linear().range([0,l]),b=d3.scale.linear().range([0,v]),s=d3.scale.category10(),w=d3.svg.axis().scale(b).orient("bottom"),x=d3.svg.axis().scale(_).orient("left"),y=d3.select(t).append("svg").attr("width",v+u.left+u.right).attr("height",l+u.top+u.bottom).append("g").attr("transform","translate("+u.left+","+u.top+")"),i=e.models,i=i.slice(0,10),o=v/i.length,h=d3.scale.linear(),h.domain(d3.extent(i,function(t){return t.attributes.frontPoints})),h.range([5,130]),_.domain([d3.max(i,function(t){return t.attributes.frontPoints}),d3.min(i,function(t){return t.attributes.frontPoints})-10]),b.domain([0,11]),0!==i.length&&y.append("g").attr("class","y axis").call(x).append("text").attr("transform","rotate(-90)").attr("y",4).attr("dy","-4em").style("text-anchor","end").text("Chartscore"),s.domain(i),d=function(t){return d3.selectAll("g rect").transition().duration(100).style("opacity",.2),d3.select("g ."+t.attributes.slug+" > rect").transition().duration(100).style("opacity",1),f(this,t)},p=function(){return d3.selectAll("g rect").transition().duration(100).style("opacity",1),$(".tip").fadeOut(50).remove()},a=function(t){var e;return e=t.attributes.artist,n.trigger("click:album:circle",e)},f=function(t,e){var n;return $("#graph").append("<div class='tip'></div>"),n=d3.select(".tip"),n.style("left",v-150+"px").style("top","50px").style("background",s(e.cid)),$(".tip").html(""+e.attributes.artist+" <br />\n"+e.attributes.album+"<br />\nTotal Appearances: "+e.attributes.appearances.length+"<br />\nChartscore: "+e.attributes.frontPoints),$(".tip").fadeIn(100)},m=function(){return $(t).append("<div class='tip text-center'></div>").find(".tip").css("width",v+u.left+u.right+"px").css("margin","auto").css("top",l/2+"px").html("<br />\nSorry, No Data is available for the selected Time Range.\n<br />\n<br />").fadeIn(100)},g=function(){return 0!==$(t).find(".tip").length?$(".info").remove():$(t).append("<div class='tip text-center info'></div>").find(".tip").css("width",v+u.left+u.right+"px").css("margin","auto").css("top",l/3+"px").html("<br />\nThis graph displays the top 10 albums on "+e.station+" over the selected time range.<br />\nThe X-Axis is determined by the album's rank.<br />\nThe Y-Axis is determined by the album's Chartscore.<br />\nMouseover any bar for more information.<br />\n<br />\n(Click anywhere to hide)\n<br />\n<br />").on("click",c).fadeIn(100)},c=function(){return $(t).find(".info").fadeOut(100),$(".info").remove()},$(t).prepend("<div class='button tiny radius infobox'></div>").find(".infobox").html("<i class='fi-info large'></i>").on("click",g),$(t).find("svg").on("click",c),r=y.selectAll(".album").data(i).enter().append("g").attr("transform",function(t,e){return"translate("+e*o+",0 )"}).attr("class",function(t){return"album "+t.attributes.slug}),r.append("rect").attr("class","bar").attr("width",o-1).attr("height",function(t){return l-_(t.attributes.frontPoints)}).attr("y",function(t){return 3+_(t.attributes.frontPoints)}).style("fill",function(t){return s(t.cid)}),r.append("text").attr("y",l+20).attr("x",function(){return o/2-10}).text(function(t,e){return"#"+(e+1)}),r.on("mouseover",d).on("mouseout",p).on("click",a),0===i.length?m():void 0}}),require.register("modules/station/showStation/stationMap",function(t,e,n){n.exports=function(t,n){var r,i,o,a,s,l;return a={top:50,right:50,bottom:50,left:50},r=e("/colorList"),l=$("#graph-region").width()-a.left-a.right,o=600-a.top-a.bottom,s=d3.select(t).append("svg").attr("width",l).attr("height",o),i={BC:["#8ad08c","#80c47e","#77b972","#6fad66","#67a25b","#609651","#598b48","#52803e","#4c7436","#45692e"],AB:["#ebe06e","#e4da74","#ddd479","#d7ce7d","#d0c881"],SK:["#e7DEB2"],MB:["#cc9f61","#ca6400","#9e8752","#877949"],ON:["#eba294","#e99d8f","#e7988a","#e59386","#e38e81","#e1897d","#df8478","#dd8074","#db7b70","#d9766c","#d77167","#d66c63","#d4675f","#d2625b","#d05d57","#ce5853","#cc5450","#ca4f4c","#c84a48","#c64544"],QC:["#d768db","#c566d1","#b564c6","#a562bc","#975fb1","#8a5ca7","#7d589c","#725592","#675187","#5c4c7d"],NS:["#20a3fe","#40c8fe","#60e4fd","#7ff8fd","#9ffcf5"],NB:["#0165e4","#025bc9","#0351ae","#044593","#043a78"],NF:["#22fc32","#4efa44","#7ff765","#a7f585","#c6f2a5"]},i.BC.reverse(),i.ON.reverse(),d3.json("canada.json",function(e,i){var c,u,p,d,h,f,m,g,y,v,b,w,x,C,k,S,A,I,R,D,F,T,V,L,q;return e?console.error(e):(L=topojson.feature(i,i.objects.prov),R={},D={},u=[],A=[],n.sort(),n.each(function(t){return u.push(t.get("city")),A.push(t.get("province")),D[t.get("province")]?D[t.get("province")].push(t.get("name")):D[t.get("province")]=[t.get("name")],R[t.get("city")]?R[t.get("city")].push(t.get("name")):R[t.get("city")]=[t.get("name")]}),A=_.uniq(A),u=_.uniq(u),F={},y=[],_.each(A,function(t){return"NF"===t&&(t="NL"),y.push("CA-"+t)}),L.features=_.filter(L.features,function(t){return-1!==_.indexOf(y,t.id)?t:void 0}),S=d3.geo.conicConformal().scale(1).rotate([105,0]).translate([0,0]),k=d3.geo.path().projection(S),c=k.bounds(L),I=.95/Math.max((c[1][0]-c[0][0])/l,(c[1][1]-c[0][1])/o),q=[(l-I*(c[1][0]+c[0][0]))/2,(o-I*(c[1][1]+c[0][1]))/2],S.scale(I).translate(q),w=function(t){d3.select("#"+t.id).transition().duration(100).style("opacity",.5)},v=function(){d3.selectAll("path").transition().duration(100).style("opacity",1)},x=function(t){var e;return e=d3.select(this).attr("r"),d3.select(this).transition().duration(100).attr("r",function(){return 2*e}),T(this,t)},b=function(){return d3.selectAll("circle").transition().duration(100).attr("r",function(t){var e;return e=R[t.properties.name].length,6*e}),m()},T=function(t,e){var n,i;return $("#graph").append("<div class='tip'></div>"),i="",_.each(R[e.properties.name],function(t){return i+=" "+t}),i.trim(),n=d3.select(".tip"),n.style("left",l-150+"px").style("top","50px").style("background",r(e.properties.name)),$(".tip").html("City: "+e.properties.name+" <br />\nStations: "+i+"<br />"),$(".tip").fadeIn(100)},m=function(){return $(".tip").fadeOut().remove()},d=function(){var t;return t={province:$(this).attr("id").split("-")[1]},"NL"===t.province&&(t.province="NF"),n.addFilter(t)},p=function(){var t;return t={city:_.reduceRight($(this).attr("class").split(" ").slice(1),function(t,e){return e+=" "+t})},n.addFilter(t)},h=topojson.feature(i,i.objects.cplaces).features,C=_.filter(h,function(t){return"Windsor"===t.properties.name&&"Ontario"!==t.properties.province?!1:-1!==_.indexOf(u,t.properties.name)?t:void 0}),f=_.map(C,function(t){return t.properties.name}),s.selectAll(".subunit").data(L.features).enter().append("path").attr("class",function(t){return"subunit "+t.id}).attr("id",function(t){return t.id}).attr("d",k).on("mouseover",w).on("mouseout",v).on("click",d),s.selectAll(".city").data(C).enter().append("circle").attr("class",function(t){return"city "+t.properties.name}).attr("r",function(t){var e;return e=R[t.properties.name].length,6*e}).style("fill",function(t){return r(""+t.properties.name)}).attr("transform",function(t){return"translate("+S(t.geometry.coordinates)+")"}).on("mouseover",x).on("mouseout",b).on("click",p),V=function(){return 0!==$(t).find(".tip").length?$(".info").remove():$(t).append("<div class='tip text-center info'></div>").find(".tip").css("width",l+a.left+a.right+"px").css("margin","auto").css("top",o/3+"px").html("<br />\nThis map displays all the cities in Canada with Campus Community stations that report to Earshot.<br />\nThe size of each dot is relative to the number of stations in that city. <br />\nUsing the filters will redraw the map to the selected location(s).<br />\nThere are no Earshot reporting stations in the three territories, or on PEI, so they are not displayed. <br />\nMouseover any city for more information.<br />\n<br />\n(Click anywhere to hide)\n<br />\n<br />").on("click",g).fadeIn(100)
},g=function(){return $(t).find(".info").fadeOut(100),$(".info").remove()},$(t).prepend("<div class='button tiny radius infobox'></div>").find(".infobox").html("<i class='fi-info large'></i>").on("click",V),$(t).find("svg").on("click",g))})}}),require.register("modules/station/showStation/templates/chart",function(t,e,n){var r=Handlebars.template(function(t,e,n,r,i){function o(t,e){var r,i,o="";return o+='\n<div class="panel"><span>',(i=n.desc)?r=i.call(t,{hash:{},data:e}):(i=t&&t.desc,r=typeof i===c?i.call(t,{hash:{},data:e}):i),o+=u(r)+"</span>\n  ",r=n["if"].call(t,t&&t.week,{hash:{},inverse:p.noop,fn:p.program(2,a,e),data:e}),(r||0===r)&&(o+=r),o+='\n</div>\n<div class="chart">\n  <table width="100%">\n    <thead>\n      <th column=\'rank\'>Rank </th>\n      <th column="artist">Artist </th>\n      <th column="album">Album </th>\n      <th column="label">Label </th>\n      <th column="appearances">Appearances </th>\n    </thead>\n    <tbody id="thechart">\n    </tbody>\n  </table>\n</div>\n'}function a(t,e){var r,i,o="";return o+='\n  <ul class="inline-list right">\n    <li><a class="next" data-week="',(i=n.week)?r=i.call(t,{hash:{},data:e}):(i=t&&t.week,r=typeof i===c?i.call(t,{hash:{},data:e}):i),o+=u(r)+'" id="prev"><i class="fi-arrow-left"></i> Prev</a></li>\n    <li><a class="next" data-week="',(i=n.week)?r=i.call(t,{hash:{},data:e}):(i=t&&t.week,r=typeof i===c?i.call(t,{hash:{},data:e}):i),o+=u(r)+'" id="next">Next <i class="fi-arrow-right"></i></a></li>\n  </ul>\n  '}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,t.helpers),i=i||{};var s,l="",c="function",u=this.escapeExpression,p=this;return s=n.unless.call(e,(s=e&&e.models,s=null==s||s===!1?s:s[0],s=null==s||s===!1?s:s.attributes,null==s||s===!1?s:s.isNull),{hash:{},inverse:p.noop,fn:p.program(1,o,i),data:i}),(s||0===s)&&(l+=s),l+="\n"});"function"==typeof define&&define.amd?define([],function(){return r}):"object"==typeof n&&n&&n.exports&&(n.exports=r)}),require.register("modules/station/showStation/templates/chartItem",function(t,e,n){var r=Handlebars.template(function(t,e,n,r,i){this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,t.helpers),i=i||{};var o,a,s="",l="function",c=this.escapeExpression;return s+="<td>",(a=n.rank)?o=a.call(e,{hash:{},data:i}):(a=e&&e.rank,o=typeof a===l?a.call(e,{hash:{},data:i}):a),s+=c(o)+"</td>\n<td><a>",(a=n.artist)?o=a.call(e,{hash:{},data:i}):(a=e&&e.artist,o=typeof a===l?a.call(e,{hash:{},data:i}):a),s+=c(o)+"</a></td>\n<td>",(a=n.album)?o=a.call(e,{hash:{},data:i}):(a=e&&e.album,o=typeof a===l?a.call(e,{hash:{},data:i}):a),s+=c(o)+"</td>\n<td>",(a=n.label)?o=a.call(e,{hash:{},data:i}):(a=e&&e.label,o=typeof a===l?a.call(e,{hash:{},data:i}):a),s+=c(o)+"</td>\n<td>"+c((o=e&&e.appearances,o=null==o||o===!1?o:o.length,typeof o===l?o.apply(e):o))+"</td>\n"});"function"==typeof define&&define.amd?define([],function(){return r}):"object"==typeof n&&n&&n.exports&&(n.exports=r)}),require.register("modules/station/showStation/templates/empty",function(t,e,n){var r=Handlebars.template(function(t,e,n,r,i){return this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,t.helpers),i=i||{},"<td colspan='100%' class=\"text-center\"><strong>Sorry, Nothing Found.</strong></td>\n"});"function"==typeof define&&define.amd?define([],function(){return r}):"object"==typeof n&&n&&n.exports&&(n.exports=r)}),require.register("modules/station/showStation/templates/emptyview",function(t,e,n){var r=Handlebars.template(function(t,e,n,r,i){function o(t){var e,n="";return n+='\n        <option value="'+c((e=t&&t.name,typeof e===l?e.apply(t):e))+'">'+c((e=t&&t.name,typeof e===l?e.apply(t):e))+"</option>\n      "}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,t.helpers),i=i||{};var a,s="",l="function",c=this.escapeExpression,u=this;return s+='<div class="panel">\n  <h3>Sorry, nothing found for that search.</h3>\n  <h4>Pick a station:</h4>\n  <form id="stationForm">\n  <div class="station-select">\n    <select width="100%" form-id="#stationForm" data-placeholder="Choose a Station..." class="chosen-select" id="station-select">\n      <option value=""></option>\n      ',a=n.each.call(e,e&&e.items,{hash:{},inverse:u.noop,fn:u.program(1,o,i),data:i}),(a||0===a)&&(s+=a),s+='\n    </select>\n  </div>\n  <button id="pickStation" type="submit" class="small">Go!</button>\n</form>\n</div>\n'});"function"==typeof define&&define.amd?define([],function(){return r}):"object"==typeof n&&n&&n.exports&&(n.exports=r)}),require.register("modules/station/showStation/templates/graph",function(t,e,n){var r=Handlebars.template(function(t,e,n,r,i){return this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,t.helpers),i=i||{},'<div class="show-for-small-only">\n  <p class="lead">For now, ChartZapp\'s graphs are only available on larger screens.</p>\n  <p>If you\'d like to see more on a mobile device,\n  <a href="#" data-reveal-id="feedback">let me know!</a></p>\n\n</div>\n'});"function"==typeof define&&define.amd?define([],function(){return r}):"object"==typeof n&&n&&n.exports&&(n.exports=r)}),require.register("modules/station/showStation/templates/panel",function(t,e,n){var r=Handlebars.template(function(t,e,n,r,i){return this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,t.helpers),i=i||{},'<ul class="medium-block-grid-3 text-center">\n  <li><button class="tiny" id="mostRecent">Most Recent</button></li>\n  <li><button class="tiny" id=\'thisYear\'>This Year</button></li>\n  <li>\n    <span class="tiny button dropdown" id="dateRange">Other</span>\n  </li>\n</ul>\n'});"function"==typeof define&&define.amd?define([],function(){return r}):"object"==typeof n&&n&&n.exports&&(n.exports=r)}),require.register("modules/station/showStation/templates/show_layout",function(t,e,n){var r=Handlebars.template(function(t,e,n,r,i){return this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,t.helpers),i=i||{},'<div id="station_layout">\n  <div class="title-row">\n    <div class="row">\n      <div id="title-region" class="small-12 columns"></div>\n    </div>\n  </div>\n  <div class="graph-row">\n    <div id="graph-region" class="small-12 columns"></div>\n  </div>\n  <div class="panel-row">\n    <div class="row">\n      <div id="panel-region" class="small-12 columns"></div>\n    </div>\n  </div>\n  <!-- <div class="graph-row">\n    <div class="row" id="topthree-region">\n    </div>\n  </div> -->\n  <div class="graph-row" >\n    <div class="row" id="table-region">\n    </div>\n  </div>\n</div>\n'});"function"==typeof define&&define.amd?define([],function(){return r}):"object"==typeof n&&n&&n.exports&&(n.exports=r)}),require.register("modules/station/showStation/templates/singleStation",function(t,e,n){var r=Handlebars.template(function(t,e,n,r,i){this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,t.helpers),i=i||{};var o,a,s="",l="function",c=this.escapeExpression;return s+='<div class="panel small-6 large-4 columns">\n  <h1 class="artist-title">',(a=n.name)?o=a.call(e,{hash:{},data:i}):(a=e&&e.name,o=typeof a===l?a.call(e,{hash:{},data:i}):a),s+=c(o)+"</h1>\n  <h3>",(a=n.city)?o=a.call(e,{hash:{},data:i}):(a=e&&e.city,o=typeof a===l?a.call(e,{hash:{},data:i}):a),s+=c(o)+", ",(a=n.province)?o=a.call(e,{hash:{},data:i}):(a=e&&e.province,o=typeof a===l?a.call(e,{hash:{},data:i}):a),s+=c(o)+"</h3>\n<!-- <p>",(a=n.streetAddress)?o=a.call(e,{hash:{},data:i}):(a=e&&e.streetAddress,o=typeof a===l?a.call(e,{hash:{},data:i}):a),s+=c(o)+"</p>\n<p>",(a=n.postalCode)?o=a.call(e,{hash:{},data:i}):(a=e&&e.postalCode,o=typeof a===l?a.call(e,{hash:{},data:i}):a),s+=c(o)+"</p> -->\n</div>\n"});"function"==typeof define&&define.amd?define([],function(){return r}):"object"==typeof n&&n&&n.exports&&(n.exports=r)}),require.register("modules/station/showStation/templates/start",function(t,e,n){var r=Handlebars.template(function(t,e,n,r,i){return this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,t.helpers),i=i||{},'\n<ul class="small-block-grid-2 medium-block-grid-3" id="stations"></ul>\n'});"function"==typeof define&&define.amd?define([],function(){return r}):"object"==typeof n&&n&&n.exports&&(n.exports=r)}),require.register("modules/station/showStation/templates/startPanel",function(t,e,n){var r=Handlebars.template(function(t,e,n,r,i){return this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,t.helpers),i=i||{},'<div id="filters" class=" ">\n  <div class="row">\n    <form>\n      <div class="medium-3 columns">\n        <select class="chosen-select" id="name" data-placeholder="Station" multiple>\n        </select>\n      </div>\n      <div class="medium-4 columns">\n        <select class="chosen-select" id="province" data-placeholder="Province" multiple>\n        </select>\n      </div>\n      <div class="medium-4 columns">\n        <select class="chosen-select" id="city" data-placeholder="City" multiple>\n        </select>\n      </div>\n      <div class="medium-1 column">\n        <a class="button secondary tiny right" id="clearFilters" href="#">Clear</a>\n      </div>\n  </form>\n  </div>\n</div>\n'});"function"==typeof define&&define.amd?define([],function(){return r}):"object"==typeof n&&n&&n.exports&&(n.exports=r)}),require.register("modules/station/showStation/templates/startTitle",function(t,e,n){var r=Handlebars.template(function(t,e,n,r,i){this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,t.helpers),i=i||{};var o,a="",s="function",l=this.escapeExpression;return a+='<div class="row">\n  <div class="small-8 columns">\n    <h1 class="artist-title">Stations</h1>\n  </div>\n  <div class="small-4 columns">\n    <h2 class="right">Total: <span class="header-label radius">'+l((o=e&&e.items,o=null==o||o===!1?o:o.length,typeof o===s?o.apply(e):o))+"</span></h2>\n  </div>\n</div>\n"});"function"==typeof define&&define.amd?define([],function(){return r}):"object"==typeof n&&n&&n.exports&&(n.exports=r)}),require.register("modules/station/showStation/templates/title",function(t,e,n){var r=Handlebars.template(function(t,e,n,r,i){this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,t.helpers),i=i||{};var o,a,s,l="",c=n.helperMissing,u=this.escapeExpression,p="function";return l+='<div class="row">\n  <div class="small-8 columns">\n    <h1 class="artist-title">'+u((a=n.toUpper||e&&e.toUpper,s={hash:{},data:i},a?a.call(e,(o=e&&e.items,o=null==o||o===!1?o:o[0],o=null==o||o===!1?o:o.appearances,o=null==o||o===!1?o:o[0],null==o||o===!1?o:o.station),s):c.call(e,"toUpper",(o=e&&e.items,o=null==o||o===!1?o:o[0],o=null==o||o===!1?o:o.appearances,o=null==o||o===!1?o:o[0],null==o||o===!1?o:o.station),s)))+"</h1>\n    <!-- <h2>"+u((o=e&&e.items,o=null==o||o===!1?o:o[0],o=null==o||o===!1?o:o.info,o=null==o||o===!1?o:o.models,o=null==o||o===!1?o:o[0],o=null==o||o===!1?o:o.attributes,o=null==o||o===!1?o:o.city,typeof o===p?o.apply(e):o))+", "+u((o=e&&e.items,o=null==o||o===!1?o:o[0],o=null==o||o===!1?o:o.info,o=null==o||o===!1?o:o.models,o=null==o||o===!1?o:o[0],o=null==o||o===!1?o:o.attributes,o=null==o||o===!1?o:o.province,typeof o===p?o.apply(e):o))+'</h2> -->\n  </div>\n  <div class="small-4 columns">\n    <h2 class="right">Charts: <span class="header-label radius">'+u((o=e&&e.items,o=null==o||o===!1?o:o[0],o=null==o||o===!1?o:o.totalWeeks,o=null==o||o===!1?o:o.length,typeof o===p?o.apply(e):o))+'</span></h2>\n    <h4 class="right">Submitting Average: <span class="header-label radius">.'+u((o=e&&e.items,o=null==o||o===!1?o:o[0],o=null==o||o===!1?o:o.percentage,typeof o===p?o.apply(e):o))+'</span></h4>\n  </div>\n</div>\n<div class="row">\n  <div class="small-6 columns">\n    <ul class="no-bullet">\n      <li>Location: <span class="label radius right">'+u((o=e&&e.items,o=null==o||o===!1?o:o[0],o=null==o||o===!1?o:o.info,o=null==o||o===!1?o:o.models,o=null==o||o===!1?o:o[0],o=null==o||o===!1?o:o.attributes,o=null==o||o===!1?o:o.city,typeof o===p?o.apply(e):o))+", "+u((o=e&&e.items,o=null==o||o===!1?o:o[0],o=null==o||o===!1?o:o.info,o=null==o||o===!1?o:o.models,o=null==o||o===!1?o:o[0],o=null==o||o===!1?o:o.attributes,o=null==o||o===!1?o:o.province,typeof o===p?o.apply(e):o))+'</span></li>\n      <li>Most Charted Artist: <span class="label radius right">'+u((o=e&&e.items,o=null==o||o===!1?o:o[0],o=null==o||o===!1?o:o.artist,typeof o===p?o.apply(e):o))+'</span></li>\n\n      <!-- <li>ChartScore: <span class="label radius right">'+u((o=e&&e.items,o=null==o||o===!1?o:o[0],o=null==o||o===!1?o:o.totalChartScore,typeof o===p?o.apply(e):o))+'</span></li> -->\n    </ul>\n  </div>\n  <div class="small-6 columns">\n    <ul class="no-bullet">\n      <!-- <li>Charts Submitted: <span class="label radius right">'+u((o=e&&e.items,o=null==o||o===!1?o:o[0],o=null==o||o===!1?o:o.totalWeeks,o=null==o||o===!1?o:o.length,typeof o===p?o.apply(e):o))+'</span></li> -->\n      <li>Albums Charted: <span class="label radius right">'+u((o=e&&e.items,o=null==o||o===!1?o:o[0],o=null==o||o===!1?o:o.totalAlbums,typeof o===p?o.apply(e):o))+'</span></li>\n      <li>Most Charted Album: <a class="label radius right" id="popStation">'+u((o=e&&e.items,o=null==o||o===!1?o:o[0],o=null==o||o===!1?o:o.album,typeof o===p?o.apply(e):o))+"</a></li>\n    </ul>\n  </div>\n</div>\n"});"function"==typeof define&&define.amd?define([],function(){return r}):"object"==typeof n&&n&&n.exports&&(n.exports=r)}),require.register("modules/station/showStation/templates/topItem",function(t,e,n){var r=Handlebars.template(function(t,e,n,r,i){function o(){return"Sorry, No Chart for this Week"}function a(t,e){var r,i,o="";return o+="\n  <h2>#",(i=n.rank)?r=i.call(t,{hash:{},data:e}):(i=t&&t.rank,r=typeof i===c?i.call(t,{hash:{},data:e}):i),o+=u(r)+":</h2>\n  <h3><a>",(i=n.artist)?r=i.call(t,{hash:{},data:e}):(i=t&&t.artist,r=typeof i===c?i.call(t,{hash:{},data:e}):i),o+=u(r)+"</a></h3>\n  <h4>",(i=n.album)?r=i.call(t,{hash:{},data:e}):(i=t&&t.album,r=typeof i===c?i.call(t,{hash:{},data:e}):i),o+=u(r)+"</h4>\n  <br /><br /><br />\n"}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,t.helpers),i=i||{};var s,l="",c="function",u=this.escapeExpression,p=this;return s=n["if"].call(e,e&&e.isNull,{hash:{},inverse:p.noop,fn:p.program(1,o,i),data:i}),(s||0===s)&&(l+=s),l+="\n\n",s=n.unless.call(e,e&&e.isNull,{hash:{},inverse:p.noop,fn:p.program(3,a,i),data:i}),(s||0===s)&&(l+=s),l+="\n"});"function"==typeof define&&define.amd?define([],function(){return r}):"object"==typeof n&&n&&n.exports&&(n.exports=r)}),require.register("modules/station/showStation/templates/topthree",function(t,e,n){var r=Handlebars.template(function(t,e,n,r,i){return this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,t.helpers),i=i||{},'<div id="topthree" data-equalizer></div>\n'});"function"==typeof define&&define.amd?define([],function(){return r}):"object"==typeof n&&n&&n.exports&&(n.exports=r)}),require.register("modules/station/station_app",function(t,e,n){var r,i={}.hasOwnProperty,o=function(t,e){function n(){this.constructor=t}for(var r in e)i.call(e,r)&&(t[r]=e[r]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t};r=e("application"),n.exports=r.module("StationApp",function(t,n,r,i,a){var s,l;return t.Router=function(t){function e(){return l=e.__super__.constructor.apply(this,arguments)}return o(e,t),e.prototype.appRoutes={"station(/)(:station)":"showStation"},e}(i.AppRouter),t.startWithParent=!1,t.Show=e("modules/station/showStation/showStation_controller"),s={showStation:function(e){return new t.Show.Controller({region:n.mainRegion,station:e?e:void 0}),a(document).foundation()}},n.addInitializer(function(){return new t.Router({controller:s})})})}),require.register("views/AppLayout",function(t,e,n){var r,i,o,a={}.hasOwnProperty,s=function(t,e){function n(){this.constructor=t}for(var r in e)a.call(e,r)&&(t[r]=e[r]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t};i=e("application"),n.exports=r=function(t){function e(){return o=e.__super__.constructor.apply(this,arguments)}return s(e,t),e.prototype.template="views/templates/appLayout",e.prototype.el="body",e}(Backbone.Marionette.Layout)}),require.register("views/templates/appLayout",function(t,e,n){var r=Handlebars.template(function(t,e,n,r,i){return this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,t.helpers),i=i||{},'<div id="wrap">\n  <div id="header-region"></div>\n  <div id="main-region" class="container row"></div>\n  <div id="push"></div>\n</div>\n<div id="footer-region"></div>\n'});"function"==typeof define&&define.amd?define([],function(){return r}):"object"==typeof n&&n&&n.exports&&(n.exports=r)}),require.register("views/templates/footer",function(t,e,n){var r=Handlebars.template(function(t,e,n,r,i){return this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,t.helpers),i=i||{},'<div id="footer">\n	<div class="container">\n		<div class=\'row\'>\n			<div class=\'small-12 columns text-center\'>\n				<h1 class="footer-title">ChartZapp!</h1>\n				<h4>Chart data collected and compiled by\n					<a href="http://www.earshot-online.com/" target="blank">\n						!Earshot Online\n					</a>\n					and published by\n					<a href="http://www.ncra.ca/" target="blank">the NCRA</a>\n				</h4>\n				<h4>Made by hand with\n					<i class="fi-heart large"></i>\n					 in MontrÃ©al by\n					<a href="http://dorianlistens.com" class="dl" target="blank">\n						Dorian Listens\n					</a>\n				</h4>\n			</div>\n		</div>\n	</div>\n</div>\n'});"function"==typeof define&&define.amd?define([],function(){return r}):"object"==typeof n&&n&&n.exports&&(n.exports=r)});